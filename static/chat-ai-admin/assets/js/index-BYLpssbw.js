import{s as te,o as yt,f as Ee,e as I,b as X,k as i,j as Je,x as Ne,w as fe,p as jt,d as ie,M as $,N as O,W as o,Y as D,Z as z,U as Le,a9 as _e,Q as N,S as m,X as fo,a3 as $t,B as F,G as be,H as he,u as L,aa as se,a4 as ge,a5 as ye,F as ne,ad as nt,af as at,a2 as ue,z as bo,ac as ho,V as go,a7 as yo}from"./vue-chunks-Chs-lyDX.js";import{J as $o,K as xo,N as Fe,O as me,P as qe,Q as V,R as j,S as ct,T as de,U as Xe,V as ke,W as Qe,X as ko,Y as wo,Z as So,$ as Co,a0 as Xt,a1 as Ft,a2 as Qt,a3 as Io,a4 as To,a5 as st,a6 as qo,a7 as Eo,a8 as Ro,a9 as Lo,aa as Po,ab as gt,ac as Oo,ad as Ao,A as Bo,_ as Q,c as De,B as Ue,ae as Mo,af as No,ag as Do,d as Pe,M as Ze,ah as dt,ai as lt,E as Uo}from"../../index-BRxqhTX0.js";import{_ as xt}from"./index-bokNoDeU.js";import{C as zo,d as kt,E as Wo}from"./vuedraggable.umd-Cw-Eq7tO.js";import"./index-BxFCEOhs.js";import{I as et}from"./Password-IO9yCNMV.js";import{_ as ut,S as Ho}from"./TextArea-DXf3OI0w.js";import{b as Yt}from"./index-DwMlK7BC.js";import{Q as we}from"./QuestionCircleOutlined-D20_EtSI.js";import{i as Vo,S as Jt,a as Zt,_ as eo}from"./index-DvlsFstf.js";import{_ as to}from"./index-Clk1-ljB.js";import{_ as wt}from"./index-DkeJF6UD.js";import{_ as St}from"./index-C-PE5BLP.js";import{_ as Ko,a as Go}from"./index-DxTcKfkl.js";import{_ as ze}from"./index-BKmN8VmO.js";import{g as oo}from"./index-ClsKim4H.js";import{C as jo,_ as Xo}from"./index-YMtarjVU.js";import{S as Fo}from"./index-Bm-CdVnz.js";import{_ as Qo}from"./index-ncsdTt1v.js";import{_ as We}from"./index-Ck-3gHdx.js";import{P as Ct}from"./PlusOutlined-BsuTPPYk.js";import{R as Yo,_ as Jo}from"./index-DW1R_2r3.js";import{b as Zo,h as en,f as tn,F as At,_ as on}from"./index-BpmDo9gD.js";import{s as nn}from"./index-DsH-ctFs.js";import{u as an}from"./robot-8Kfz3AXY.js";import{u as sn,E as ln,M as rn,_ as cn}from"./index-C2U3xRWB.js";import{D as dn}from"./Dropdown-jIYTCEe9.js";import{R as Bt}from"./index-DYUnQ0Fx.js";import{u as un}from"./useRefs-BsXgmhaJ.js";import{u as Mt}from"./CheckOutlined-CvMo00tT.js";import{i as Nt}from"./slide-Dp7-2q38.js";import"./dayjs-CkLU8sYs.js";import"./axios-Cm0UX6qg.js";import"./qs-DjYKlG5V.js";import"./crypto-js-BUUKnz8c.js";import"./FormItemContext-VrUvw7Ec.js";import"./inputProps-C625v0VH.js";import"./DownOutlined-bMEBWO_G.js";import"./move-DuzEngAP.js";import"./collapseMotion-DN2MDQ98.js";function _n(e,t,s){for(var l=-1,n=t.length,r={};++l<n;){var a=t[l],u=Zo(e,a);s(u,a)&&$o(r,xo(a,e),u)}return r}function pn(e,t){return _n(e,t,function(s,l){return en(e,l)})}var no=tn(function(e,t){return e==null?{}:pn(e,t)});function vn(e){const t=te(),s=te(!1);function l(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];s.value||(Fe.cancel(t.value),t.value=Fe(()=>{e(...r)}))}return yt(()=>{s.value=!0,Fe.cancel(t.value)}),l}function mn(e){const t=te([]),s=te(typeof e=="function"?e():e),l=vn(()=>{let r=s.value;t.value.forEach(a=>{r=a(r)}),t.value=[],s.value=r});function n(r){t.value.push(r),l()}return[s,n]}const fn=Ee({compatConfig:{MODE:3},name:"TabNode",props:{id:{type:String},prefixCls:{type:String},tab:{type:Object},active:{type:Boolean},closable:{type:Boolean},editable:{type:Object},onClick:{type:Function},onResize:{type:Function},renderWrapper:{type:Function},removeAriaLabel:{type:String},onFocus:{type:Function}},emits:["click","resize","remove","focus"],setup(e,t){let{expose:s,attrs:l}=t;const n=I();function r(p){var b;!((b=e.tab)===null||b===void 0)&&b.disabled||e.onClick(p)}s({domRef:n});function a(p){var b;p.preventDefault(),p.stopPropagation(),e.editable.onEdit("remove",{key:(b=e.tab)===null||b===void 0?void 0:b.key,event:p})}const u=X(()=>{var p;return e.editable&&e.closable!==!1&&!(!((p=e.tab)===null||p===void 0)&&p.disabled)});return()=>{var p;const{prefixCls:b,id:h,active:y,tab:{key:c,tab:_,disabled:x,closeIcon:k},renderWrapper:v,removeAriaLabel:d,editable:q,onFocus:w}=e,f=`${b}-tab`,g=i("div",{key:c,ref:n,class:qe(f,{[`${f}-with-remove`]:u.value,[`${f}-active`]:y,[`${f}-disabled`]:x}),style:l.style,onClick:r},[i("div",{role:"tab","aria-selected":y,id:h&&`${h}-tab-${c}`,class:`${f}-btn`,"aria-controls":h&&`${h}-panel-${c}`,"aria-disabled":x,tabindex:x?null:0,onClick:T=>{T.stopPropagation(),r(T)},onKeydown:T=>{[me.SPACE,me.ENTER].includes(T.which)&&(T.preventDefault(),r(T))},onFocus:w},[typeof _=="function"?_():_]),u.value&&i("button",{type:"button","aria-label":d||"remove",tabindex:0,class:`${f}-remove`,onClick:T=>{T.stopPropagation(),a(T)}},[(k==null?void 0:k())||((p=q.removeIcon)===null||p===void 0?void 0:p.call(q))||"×"])]);return v?v(g):g}}}),Dt={width:0,height:0,left:0,top:0};function bn(e,t){const s=I(new Map);return Je(()=>{var l,n;const r=new Map,a=e.value,u=t.value.get((l=a[0])===null||l===void 0?void 0:l.key)||Dt,p=u.left+u.width;for(let b=0;b<a.length;b+=1){const{key:h}=a[b];let y=t.value.get(h);y||(y=t.value.get((n=a[b-1])===null||n===void 0?void 0:n.key)||Dt);const c=r.get(h)||V({},y);c.right=p-c.left-c.width,r.set(h,c)}s.value=new Map(r)}),s}const ao=Ee({compatConfig:{MODE:3},name:"AddButton",inheritAttrs:!1,props:{prefixCls:String,editable:{type:Object},locale:{type:Object,default:void 0}},setup(e,t){let{expose:s,attrs:l}=t;const n=I();return s({domRef:n}),()=>{const{prefixCls:r,editable:a,locale:u}=e;return!a||a.showAdd===!1?null:i("button",{ref:n,type:"button",class:`${r}-nav-add`,style:l.style,"aria-label":(u==null?void 0:u.addAriaLabel)||"Add tab",onClick:p=>{a.onEdit("add",{event:p})}},[a.addIcon?a.addIcon():"+"])}}}),hn={prefixCls:{type:String},id:{type:String},tabs:{type:Object},rtl:{type:Boolean},tabBarGutter:{type:Number},activeKey:{type:[String,Number]},mobile:{type:Boolean},moreIcon:ct.any,moreTransitionName:{type:String},editable:{type:Object},locale:{type:Object,default:void 0},removeAriaLabel:String,onTabClick:{type:Function},popupClassName:String,getPopupContainer:de()},gn=Ee({compatConfig:{MODE:3},name:"OperationNode",inheritAttrs:!1,props:hn,emits:["tabClick"],slots:Object,setup(e,t){let{attrs:s,slots:l}=t;const[n,r]=j(!1),[a,u]=j(null),p=_=>{const x=e.tabs.filter(d=>!d.disabled);let k=x.findIndex(d=>d.key===a.value)||0;const v=x.length;for(let d=0;d<v;d+=1){k=(k+_+v)%v;const q=x[k];if(!q.disabled){u(q.key);return}}},b=_=>{const{which:x}=_;if(!n.value){[me.DOWN,me.SPACE,me.ENTER].includes(x)&&(r(!0),_.preventDefault());return}switch(x){case me.UP:p(-1),_.preventDefault();break;case me.DOWN:p(1),_.preventDefault();break;case me.ESC:r(!1);break;case me.SPACE:case me.ENTER:a.value!==null&&e.onTabClick(a.value,_);break}},h=X(()=>`${e.id}-more-popup`),y=X(()=>a.value!==null?`${h.value}-${a.value}`:null),c=(_,x)=>{_.preventDefault(),_.stopPropagation(),e.editable.onEdit("remove",{key:x,event:_})};return Ne(()=>{fe(a,()=>{const _=document.getElementById(y.value);_&&_.scrollIntoView&&_.scrollIntoView(!1)},{flush:"post",immediate:!0})}),fe(n,()=>{n.value||u(null)}),sn({}),()=>{var _;const{prefixCls:x,id:k,tabs:v,locale:d,mobile:q,moreIcon:w=((_=l.moreIcon)===null||_===void 0?void 0:_.call(l))||i(ln,null,null),moreTransitionName:f,editable:g,tabBarGutter:T,rtl:C,onTabClick:E,popupClassName:P}=e;if(!v.length)return null;const S=`${x}-dropdown`,H=d==null?void 0:d.dropdownAriaLabel,le={[C?"marginRight":"marginLeft"]:T};v.length||(le.visibility="hidden",le.order=1);const A=qe({[`${S}-rtl`]:C,[`${P}`]:!0}),M=q?null:i(dn,{prefixCls:S,trigger:["hover"],visible:n.value,transitionName:f,onVisibleChange:r,overlayClassName:A,mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:e.getPopupContainer},{overlay:()=>i(rn,{onClick:U=>{let{key:re,domEvent:J}=U;E(re,J),r(!1)},id:h.value,tabindex:-1,role:"listbox","aria-activedescendant":y.value,selectedKeys:[a.value],"aria-label":H!==void 0?H:"expanded dropdown"},{default:()=>[v.map(U=>{var re,J;const pe=g&&U.closable!==!1&&!U.disabled;return i(cn,{key:U.key,id:`${h.value}-${U.key}`,role:"option","aria-controls":k&&`${k}-panel-${U.key}`,disabled:U.disabled},{default:()=>[i("span",null,[typeof U.tab=="function"?U.tab():U.tab]),pe&&i("button",{type:"button","aria-label":e.removeAriaLabel||"remove",tabindex:0,class:`${S}-menu-item-remove`,onClick:ve=>{ve.stopPropagation(),c(ve,U.key)}},[((re=U.closeIcon)===null||re===void 0?void 0:re.call(U))||((J=g.removeIcon)===null||J===void 0?void 0:J.call(g))||"×"])]})})]}),default:()=>i("button",{type:"button",class:`${x}-nav-more`,style:le,tabindex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":h.value,id:`${k}-more`,"aria-expanded":n.value,onKeydown:b},[w])});return i("div",{class:qe(`${x}-nav-operations`,s.class),style:s.style},[M,i(ao,{prefixCls:x,locale:d,editable:g},null)])}}}),so=Symbol("tabsContextKey"),yn=e=>{jt(so,e)},io=()=>ie(so,{tabs:I([]),prefixCls:I()}),$n=.1,Ut=.01,it=20,zt=Math.pow(.995,it);function xn(e,t){const[s,l]=j(),[n,r]=j(0),[a,u]=j(0),[p,b]=j(),h=I();function y(g){const{screenX:T,screenY:C}=g.touches[0];l({x:T,y:C}),clearInterval(h.value)}function c(g){if(!s.value)return;g.preventDefault();const{screenX:T,screenY:C}=g.touches[0],E=T-s.value.x,P=C-s.value.y;t(E,P),l({x:T,y:C});const S=Date.now();u(S-n.value),r(S),b({x:E,y:P})}function _(){if(!s.value)return;const g=p.value;if(l(null),b(null),g){const T=g.x/a.value,C=g.y/a.value,E=Math.abs(T),P=Math.abs(C);if(Math.max(E,P)<$n)return;let S=T,H=C;h.value=setInterval(()=>{if(Math.abs(S)<Ut&&Math.abs(H)<Ut){clearInterval(h.value);return}S*=zt,H*=zt,t(S*it,H*it)},it)}}const x=I();function k(g){const{deltaX:T,deltaY:C}=g;let E=0;const P=Math.abs(T),S=Math.abs(C);P===S?E=x.value==="x"?T:C:P>S?(E=T,x.value="x"):(E=C,x.value="y"),t(-E,-E)&&g.preventDefault()}const v=I({onTouchStart:y,onTouchMove:c,onTouchEnd:_,onWheel:k});function d(g){v.value.onTouchStart(g)}function q(g){v.value.onTouchMove(g)}function w(g){v.value.onTouchEnd(g)}function f(g){v.value.onWheel(g)}Ne(()=>{var g,T;document.addEventListener("touchmove",q,{passive:!1}),document.addEventListener("touchend",w,{passive:!1}),(g=e.value)===null||g===void 0||g.addEventListener("touchstart",d,{passive:!1}),(T=e.value)===null||T===void 0||T.addEventListener("wheel",f,{passive:!1})}),yt(()=>{document.removeEventListener("touchmove",q),document.removeEventListener("touchend",w)})}function Wt(e,t){const s=I(e);function l(n){const r=typeof n=="function"?n(s.value):n;r!==s.value&&t(r,s.value),s.value=r}return[s,l]}const Ht={width:0,height:0,left:0,top:0,right:0},kn=()=>({id:{type:String},tabPosition:{type:String},activeKey:{type:[String,Number]},rtl:{type:Boolean},animated:Qe(),editable:Qe(),moreIcon:ct.any,moreTransitionName:{type:String},mobile:{type:Boolean},tabBarGutter:{type:Number},renderTabBar:{type:Function},locale:Qe(),popupClassName:String,getPopupContainer:de(),onTabClick:{type:Function},onTabScroll:{type:Function}}),Vt=Ee({compatConfig:{MODE:3},name:"TabNavList",inheritAttrs:!1,props:kn(),slots:Object,emits:["tabClick","tabScroll"],setup(e,t){let{attrs:s,slots:l}=t;const{tabs:n,prefixCls:r}=io(),a=te(),u=te(),p=te(),b=te(),[h,y]=un(),c=X(()=>e.tabPosition==="top"||e.tabPosition==="bottom"),[_,x]=Wt(0,(B,R)=>{c.value&&e.onTabScroll&&e.onTabScroll({direction:B>R?"left":"right"})}),[k,v]=Wt(0,(B,R)=>{!c.value&&e.onTabScroll&&e.onTabScroll({direction:B>R?"top":"bottom"})}),[d,q]=j(0),[w,f]=j(0),[g,T]=j(null),[C,E]=j(null),[P,S]=j(0),[H,le]=j(0),[A,M]=mn(new Map),U=bn(n,A),re=X(()=>`${r.value}-nav-operations-hidden`),J=te(0),pe=te(0);Je(()=>{c.value?e.rtl?(J.value=0,pe.value=Math.max(0,d.value-g.value)):(J.value=Math.min(0,g.value-d.value),pe.value=0):(J.value=Math.min(0,C.value-w.value),pe.value=0)});const ve=B=>B<J.value?J.value:B>pe.value?pe.value:B,He=te(),[oe,Ve]=j(),Ke=()=>{Ve(Date.now())},Ge=()=>{clearTimeout(He.value)},tt=(B,R)=>{B(W=>ve(W+R))};xn(a,(B,R)=>{if(c.value){if(g.value>=d.value)return!1;tt(x,B)}else{if(C.value>=w.value)return!1;tt(v,R)}return Ge(),Ke(),!0}),fe(oe,()=>{Ge(),oe.value&&(He.value=setTimeout(()=>{Ve(0)},100))});const Ae=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activeKey;const R=U.value.get(B)||{width:0,height:0,left:0,right:0,top:0};if(c.value){let W=_.value;e.rtl?R.right<_.value?W=R.right:R.right+R.width>_.value+g.value&&(W=R.right+R.width-g.value):R.left<-_.value?W=-R.left:R.left+R.width>-_.value+g.value&&(W=-(R.left+R.width-g.value)),v(0),x(ve(W))}else{let W=k.value;R.top<-k.value?W=-R.top:R.top+R.height>-k.value+C.value&&(W=-(R.top+R.height-C.value)),x(0),v(ve(W))}},vt=te(0),mt=te(0);Je(()=>{let B,R,W,K,Z,ee;const Re=U.value;["top","bottom"].includes(e.tabPosition)?(B="width",K=g.value,Z=d.value,ee=P.value,R=e.rtl?"right":"left",W=Math.abs(_.value)):(B="height",K=C.value,Z=d.value,ee=H.value,R="top",W=-k.value);let ae=K;Z+ee>K&&Z<K&&(ae=K-ee);const xe=n.value;if(!xe.length)return[vt.value,mt.value]=[0,0];const Ce=xe.length;let Be=Ce;for(let Y=0;Y<Ce;Y+=1){const ce=Re.get(xe[Y].key)||Ht;if(ce[R]+ce[B]>W+ae){Be=Y-1;break}}let G=0;for(let Y=Ce-1;Y>=0;Y-=1)if((Re.get(xe[Y].key)||Ht)[R]<W){G=Y+1;break}return[vt.value,mt.value]=[G,Be]});const ft=()=>{var B,R,W,K,Z;const ee=((B=a.value)===null||B===void 0?void 0:B.offsetWidth)||0,Re=((R=a.value)===null||R===void 0?void 0:R.offsetHeight)||0,ae=((W=b.value)===null||W===void 0?void 0:W.$el)||{},xe=ae.offsetWidth||0,Ce=ae.offsetHeight||0;T(ee),E(Re),S(xe),le(Ce);const Be=(((K=u.value)===null||K===void 0?void 0:K.offsetWidth)||0)-xe,G=(((Z=u.value)===null||Z===void 0?void 0:Z.offsetHeight)||0)-Ce;q(Be),f(G),M(()=>{const Y=new Map;return n.value.forEach(ce=>{let{key:Me}=ce;const Ie=y.value.get(Me),Te=(Ie==null?void 0:Ie.$el)||Ie;Te&&Y.set(Me,{width:Te.offsetWidth,height:Te.offsetHeight,left:Te.offsetLeft,top:Te.offsetTop})}),Y})},Et=X(()=>[...n.value.slice(0,vt.value),...n.value.slice(mt.value+1)]),[_o,po]=j(),Se=X(()=>U.value.get(e.activeKey)),Rt=te(),Lt=()=>{Fe.cancel(Rt.value)};fe([Se,c,()=>e.rtl],()=>{const B={};Se.value&&(c.value?(e.rtl?B.right=Xe(Se.value.right):B.left=Xe(Se.value.left),B.width=Xe(Se.value.width)):(B.top=Xe(Se.value.top),B.height=Xe(Se.value.height))),Lt(),Rt.value=Fe(()=>{po(B)})}),fe([()=>e.activeKey,Se,U,c],()=>{Ae()},{flush:"post"}),fe([()=>e.rtl,()=>e.tabBarGutter,()=>e.activeKey,()=>n.value],()=>{ft()},{flush:"post"});const bt=B=>{let{position:R,prefixCls:W,extra:K}=B;if(!K)return null;const Z=K==null?void 0:K({position:R});return Z?i("div",{class:`${W}-extra-content`},[Z]):null};return yt(()=>{Ge(),Lt()}),()=>{const{id:B,animated:R,activeKey:W,rtl:K,editable:Z,locale:ee,tabPosition:Re,tabBarGutter:ae,onTabClick:xe}=e,{class:Ce,style:Be}=s,G=r.value,Y=!!Et.value.length,ce=`${G}-nav-wrap`;let Me,Ie,Te,Pt;c.value?K?(Ie=_.value>0,Me=_.value+g.value<d.value):(Me=_.value<0,Ie=-_.value+g.value<d.value):(Te=k.value<0,Pt=-k.value+C.value<w.value);const ot={};Re==="top"||Re==="bottom"?ot[K?"marginRight":"marginLeft"]=typeof ae=="number"?`${ae}px`:ae:ot.marginTop=typeof ae=="number"?`${ae}px`:ae;const Ot=n.value.map((ht,vo)=>{const{key:je}=ht;return i(fn,{id:B,prefixCls:G,key:je,tab:ht,style:vo===0?void 0:ot,closable:ht.closable,editable:Z,active:je===W,removeAriaLabel:ee==null?void 0:ee.removeAriaLabel,ref:h(je),onClick:mo=>{xe(je,mo)},onFocus:()=>{Ae(je),Ke(),a.value&&(K||(a.value.scrollLeft=0),a.value.scrollTop=0)}},l)});return i("div",{role:"tablist",class:qe(`${G}-nav`,Ce),style:Be,onKeydown:()=>{Ke()}},[i(bt,{position:"left",prefixCls:G,extra:l.leftExtra},null),i(Bt,{onResize:ft},{default:()=>[i("div",{class:qe(ce,{[`${ce}-ping-left`]:Me,[`${ce}-ping-right`]:Ie,[`${ce}-ping-top`]:Te,[`${ce}-ping-bottom`]:Pt}),ref:a},[i(Bt,{onResize:ft},{default:()=>[i("div",{ref:u,class:`${G}-nav-list`,style:{transform:`translate(${_.value}px, ${k.value}px)`,transition:oe.value?"none":void 0}},[Ot,i(ao,{ref:b,prefixCls:G,locale:ee,editable:Z,style:V(V({},Ot.length===0?void 0:ot),{visibility:Y?"hidden":null})},null),i("div",{class:qe(`${G}-ink-bar`,{[`${G}-ink-bar-animated`]:R.inkBar}),style:_o.value},null)])]})])]}),i(gn,ke(ke({},e),{},{removeAriaLabel:ee==null?void 0:ee.removeAriaLabel,ref:p,prefixCls:G,tabs:Et.value,class:!Y&&re.value}),no(l,["moreIcon"])),i(bt,{position:"right",prefixCls:G,extra:l.rightExtra},null),i(bt,{position:"right",prefixCls:G,extra:l.tabBarExtraContent},null)])}}}),wn=Ee({compatConfig:{MODE:3},name:"TabPanelList",inheritAttrs:!1,props:{activeKey:{type:[String,Number]},id:{type:String},rtl:{type:Boolean},animated:{type:Object,default:void 0},tabPosition:{type:String},destroyInactiveTabPane:{type:Boolean}},setup(e){const{tabs:t,prefixCls:s}=io();return()=>{const{id:l,activeKey:n,animated:r,tabPosition:a,rtl:u,destroyInactiveTabPane:p}=e,b=r.tabPane,h=s.value,y=t.value.findIndex(c=>c.key===n);return i("div",{class:`${h}-content-holder`},[i("div",{class:[`${h}-content`,`${h}-content-${a}`,{[`${h}-content-animated`]:b}],style:y&&b?{[u?"marginRight":"marginLeft"]:`-${y}00%`}:null},[t.value.map(c=>ko(c.node,{key:c.key,prefixCls:h,tabKey:c.key,id:l,animated:b,active:c.key===n,destroyInactiveTabPane:p}))])])}}}),Sn=e=>{const{componentCls:t,motionDurationSlow:s}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${s}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${s}`}}}}},[Nt(e,"slide-up"),Nt(e,"slide-down")]]},Cn=e=>{const{componentCls:t,tabsCardHorizontalPadding:s,tabsCardHeadBackground:l,tabsCardGutter:n,colorSplit:r}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:s,background:l,border:`${e.lineWidth}px ${e.lineType} ${r}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:e.colorPrimary,background:e.colorBgContainer},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:`${n}px`}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:`${n}px`}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadiusLG}px 0 0 ${e.borderRadiusLG}px`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},In=e=>{const{componentCls:t,tabsHoverColor:s,dropdownEdgeChildVerticalPadding:l}=e;return{[`${t}-dropdown`]:V(V({},Xt(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${l}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":V(V({},Co),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${e.paddingXXS}px ${e.paddingSM}px`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:s}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Tn=e=>{const{componentCls:t,margin:s,colorSplit:l}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:`0 0 ${s}px 0`,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${e.lineWidth}px ${e.lineType} ${l}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:`${s}px`,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:e.controlHeight*1.25,[`${t}-tab`]:{padding:`${e.paddingXS}px ${e.paddingLG}px`,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:`${e.margin}px 0 0 0`},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${e.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-e.lineWidth},borderRight:{_skip_check_:!0,value:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},qn=e=>{const{componentCls:t,padding:s}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px 0`,fontSize:e.fontSize}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${s}px 0`,fontSize:e.fontSizeLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXXS*1.5}px ${s}px`}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${e.borderRadius}px ${e.borderRadius}px`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${e.borderRadius}px ${e.borderRadius}px 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${e.borderRadius}px ${e.borderRadius}px 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${e.borderRadius}px 0 0 ${e.borderRadius}px`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:`${e.paddingXS}px ${s}px ${e.paddingXXS*1.5}px`}}}}}},En=e=>{const{componentCls:t,tabsActiveColor:s,tabsHoverColor:l,iconCls:n,tabsHorizontalGutter:r}=e,a=`${t}-tab`;return{[a]:{position:"relative",display:"inline-flex",alignItems:"center",padding:`${e.paddingSM}px 0`,fontSize:`${e.fontSize}px`,background:"transparent",border:0,outline:"none",cursor:"pointer","&-btn, &-remove":V({"&:focus:not(:focus-visible), &:active":{color:s}},Ft(e)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-e.marginXXS},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},"&:hover":{color:l},[`&${a}-active ${a}-btn`]:{color:e.colorPrimary,textShadow:e.tabsActiveTextShadow},[`&${a}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${a}-disabled ${a}-btn, &${a}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${a}-remove ${n}`]:{margin:0},[n]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${a} + ${a}`]:{margin:{_skip_check_:!0,value:`0 0 0 ${r}px`}}}},Rn=e=>{const{componentCls:t,tabsHorizontalGutter:s,iconCls:l,tabsCardGutter:n}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:`0 0 0 ${s}px`},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[l]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${e.marginSM}px`}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${e.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${e.marginXXS}px`},[l]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:`${n}px`},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Ln=e=>{const{componentCls:t,tabsCardHorizontalPadding:s,tabsCardHeight:l,tabsCardGutter:n,tabsHoverColor:r,tabsActiveColor:a,colorSplit:u}=e;return{[t]:V(V(V(V({},Xt(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:s,background:"transparent",border:0,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:V({minWidth:`${l}px`,marginLeft:{_skip_check_:!0,value:`${n}px`},padding:`0 ${e.paddingXS}px`,background:"transparent",border:`${e.lineWidth}px ${e.lineType} ${u}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:r},"&:active, &:focus:not(:focus-visible)":{color:a}},Ft(e))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.colorPrimary,pointerEvents:"none"}}),En(e)),{[`${t}-content`]:{position:"relative",display:"flex",width:"100%","&-animated":{transition:"margin 0.3s"}},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:{outline:"none",flex:"none",width:"100%"}}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}},Pn=wo("Tabs",e=>{const t=e.controlHeightLG,s=So(e,{tabsHoverColor:e.colorPrimaryHover,tabsActiveColor:e.colorPrimaryActive,tabsCardHorizontalPadding:`${(t-Math.round(e.fontSize*e.lineHeight))/2-e.lineWidth}px ${e.padding}px`,tabsCardHeight:t,tabsCardGutter:e.marginXXS/2,tabsHorizontalGutter:32,tabsCardHeadBackground:e.colorFillAlter,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120});return[qn(s),Rn(s),Tn(s),In(s),Cn(s),Ln(s),Sn(s)]},e=>({zIndexPopup:e.zIndexPopupBase+50}));let Kt=0;const lo=()=>({prefixCls:{type:String},id:{type:String},popupClassName:String,getPopupContainer:de(),activeKey:{type:[String,Number]},defaultActiveKey:{type:[String,Number]},direction:st(),animated:qo([Boolean,Object]),renderTabBar:de(),tabBarGutter:{type:Number},tabBarStyle:Qe(),tabPosition:st(),destroyInactiveTabPane:Eo(),hideAdd:Boolean,type:st(),size:st(),centered:Boolean,onEdit:de(),onChange:de(),onTabClick:de(),onTabScroll:de(),"onUpdate:activeKey":de(),locale:Qe(),onPrevClick:de(),onNextClick:de(),tabBarExtraContent:ct.any});function On(e){return e.map(t=>{if(Ro(t)){const s=V({},t.props||{});for(const[c,_]of Object.entries(s))delete s[c],s[Lo(c)]=_;const l=t.children||{},n=t.key!==void 0?t.key:void 0,{tab:r=l.tab,disabled:a,forceRender:u,closable:p,animated:b,active:h,destroyInactiveTabPane:y}=s;return V(V({key:n},s),{node:t,closeIcon:l.closeIcon,tab:r,disabled:a===""||a,forceRender:u===""||u,closable:p===""||p,animated:b===""||b,active:h===""||h,destroyInactiveTabPane:y===""||y})}return null}).filter(t=>t)}const An=Ee({compatConfig:{MODE:3},name:"InternalTabs",inheritAttrs:!1,props:V(V({},Qt(lo(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}})),{tabs:Po()}),slots:Object,setup(e,t){let{attrs:s,slots:l}=t;gt(e.onPrevClick===void 0&&e.onNextClick===void 0,"Tabs","`onPrevClick / @prevClick` and `onNextClick / @nextClick` has been removed. Please use `onTabScroll / @tabScroll` instead."),gt(e.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` prop has been removed. Please use `rightExtra` slot instead."),gt(l.tabBarExtraContent===void 0,"Tabs","`tabBarExtraContent` slot is deprecated. Please use `rightExtra` slot instead.");const{prefixCls:n,direction:r,size:a,rootPrefixCls:u,getPopupContainer:p}=Oo("tabs",e),[b,h]=Pn(n),y=X(()=>r.value==="rtl"),c=X(()=>{const{animated:C,tabPosition:E}=e;return C===!1||["left","right"].includes(E)?{inkBar:!1,tabPane:!1}:C===!0?{inkBar:!0,tabPane:!0}:V({inkBar:!0,tabPane:!1},typeof C=="object"?C:{})}),[_,x]=j(!1);Ne(()=>{x(Vo())});const[k,v]=Mt(()=>{var C;return(C=e.tabs[0])===null||C===void 0?void 0:C.key},{value:X(()=>e.activeKey),defaultValue:e.defaultActiveKey}),[d,q]=j(()=>e.tabs.findIndex(C=>C.key===k.value));Je(()=>{var C;let E=e.tabs.findIndex(P=>P.key===k.value);E===-1&&(E=Math.max(0,Math.min(d.value,e.tabs.length-1)),v((C=e.tabs[E])===null||C===void 0?void 0:C.key)),q(E)});const[w,f]=Mt(null,{value:X(()=>e.id)}),g=X(()=>_.value&&!["left","right"].includes(e.tabPosition)?"top":e.tabPosition);Ne(()=>{e.id||(f(`rc-tabs-${Kt}`),Kt+=1)});const T=(C,E)=>{var P,S;(P=e.onTabClick)===null||P===void 0||P.call(e,C,E);const H=C!==k.value;v(C),H&&((S=e.onChange)===null||S===void 0||S.call(e,C))};return yn({tabs:X(()=>e.tabs),prefixCls:n}),()=>{const{id:C,type:E,tabBarGutter:P,tabBarStyle:S,locale:H,destroyInactiveTabPane:le,renderTabBar:A=l.renderTabBar,onTabScroll:M,hideAdd:U,centered:re}=e,J={id:w.value,activeKey:k.value,animated:c.value,tabPosition:g.value,rtl:y.value,mobile:_.value};let pe;E==="editable-card"&&(pe={onEdit:(Ve,Ke)=>{let{key:Ge,event:tt}=Ke;var Ae;(Ae=e.onEdit)===null||Ae===void 0||Ae.call(e,Ve==="add"?tt:Ge,Ve)},removeIcon:()=>i(Ao,null,null),addIcon:l.addIcon?l.addIcon:()=>i(Ct,null,null),showAdd:U!==!0});let ve;const He=V(V({},J),{moreTransitionName:`${u.value}-slide-up`,editable:pe,locale:H,tabBarGutter:P,onTabClick:T,onTabScroll:M,style:S,getPopupContainer:p.value,popupClassName:qe(e.popupClassName,h.value)});A?ve=A(V(V({},He),{DefaultTabBar:Vt})):ve=i(Vt,He,no(l,["moreIcon","leftExtra","rightExtra","tabBarExtraContent"]));const oe=n.value;return b(i("div",ke(ke({},s),{},{id:C,class:qe(oe,`${oe}-${g.value}`,{[h.value]:!0,[`${oe}-${a.value}`]:a.value,[`${oe}-card`]:["card","editable-card"].includes(E),[`${oe}-editable-card`]:E==="editable-card",[`${oe}-centered`]:re,[`${oe}-mobile`]:_.value,[`${oe}-editable`]:E==="editable-card",[`${oe}-rtl`]:y.value},s.class)}),[ve,i(wn,ke(ke({destroyInactiveTabPane:le},J),{},{animated:c.value}),null)]))}}}),Ye=Ee({compatConfig:{MODE:3},name:"ATabs",inheritAttrs:!1,props:Qt(lo(),{tabPosition:"top",animated:{inkBar:!0,tabPane:!1}}),slots:Object,setup(e,t){let{attrs:s,slots:l,emit:n}=t;const r=a=>{n("update:activeKey",a),n("change",a)};return()=>{var a;const u=On(Io((a=l.default)===null||a===void 0?void 0:a.call(l)));return i(An,ke(ke(ke({},To(e,["onUpdate:activeKey"])),s),{},{onChange:r,tabs:u}),l)}}}),Bn=()=>({tab:ct.any,disabled:{type:Boolean},forceRender:{type:Boolean},closable:{type:Boolean},animated:{type:Boolean},active:{type:Boolean},destroyInactiveTabPane:{type:Boolean},prefixCls:{type:String},tabKey:{type:[String,Number]},id:{type:String}}),rt=Ee({compatConfig:{MODE:3},name:"ATabPane",inheritAttrs:!1,__ANT_TAB_PANE:!0,props:Bn(),slots:Object,setup(e,t){let{attrs:s,slots:l}=t;const n=I(e.forceRender);fe([()=>e.active,()=>e.destroyInactiveTabPane],()=>{e.active?n.value=!0:e.destroyInactiveTabPane&&(n.value=!1)},{immediate:!0});const r=X(()=>e.active?{}:e.animated?{visibility:"hidden",height:0,overflowY:"hidden"}:{display:"none"});return()=>{var a;const{prefixCls:u,forceRender:p,id:b,active:h,tabKey:y}=e;return i("div",{id:b&&`${b}-panel-${y}`,role:"tabpanel",tabindex:h?0:-1,"aria-labelledby":b&&`${b}-tab-${y}`,"aria-hidden":!h,style:[r.value,s.style],class:[`${u}-tabpane`,h&&`${u}-tabpane-active`,s.class]},[(h||n.value||p)&&((a=l.default)===null||a===void 0?void 0:a.call(l))])}}});Ye.TabPane=rt;Ye.install=function(e){return e.component(Ye.name,Ye),e.component(rt.name,rt),e};var Mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const Nn=Mn;function Gt(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(s).filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable}))),l.forEach(function(n){Dn(e,n,s[n])})}return e}function Dn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var It=function(t,s){var l=Gt({},t,s.attrs);return i(Bo,Gt({},l,{icon:Nn}),null)};It.displayName="SyncOutlined";It.inheritAttrs=!1;const Un=It,zn={class:"edit-box-header"},Wn={class:"left-box"},Hn={class:"edit-box-title"},Vn={key:0},Kn={key:0,class:"title-tip"},Gn={class:"right-box"},jn={class:"extra-box"},Xn={class:"actions-box"},Fn={__name:"edit-box",props:{iconName:{type:String,default:""},title:{type:String,default:""},isEdit:{type:Boolean,default:!1},bodyStyle:{type:Object,default:()=>({})}},emits:["update:isEdit","save","edit"],setup(e,{emit:t}){const s=t,l=e,n=a=>{s("edit"),s("update:isEdit",a)},r=()=>{s("save")};return(a,u)=>{const p=De,b=Ue,h=xt;return $(),O("div",{class:$t(["edit-box",{"is-edit":e.isEdit}])},[o("div",zn,[o("div",Wn,[i(p,{class:"edit-box-icon",name:l.iconName},null,8,["name"]),o("span",Hn,[D(z(l.title)+" ",1),a.$slots.icon?($(),O("span",Vn,[Le(a.$slots,"icon",{},void 0,!0)])):_e("",!0)]),a.$slots.tip?($(),O("span",Kn,[Le(a.$slots,"tip",{},void 0,!0)])):_e("",!0)]),o("div",Gn,[o("div",jn,[Le(a.$slots,"extra",{},()=>[o("div",Xn,[l.isEdit?($(),N(h,{key:0,gap:8},{default:m(()=>[i(b,{onClick:r,size:"small",type:"primary"},{default:m(()=>[D("保存")]),_:1}),i(b,{onClick:u[0]||(u[0]=y=>n(!1)),size:"small"},{default:m(()=>[D("取消")]),_:1})]),_:1})):($(),N(b,{key:1,onClick:u[1]||(u[1]=y=>n(!0)),size:"small"},{default:m(()=>[D("修改")]),_:1}))])],!0)])])]),o("div",{class:"edit-box-body",style:fo({...e.bodyStyle})},[Le(a.$slots,"default",{},void 0,!0)],4)],2)}}},$e=Q(Fn,[["__scopeId","data-v-dbe09743"]]),ro=e=>(ge("data-v-899bcb03"),e=e(),ye(),e),Qn={class:"robot-form-box"},Yn={class:"form-item"},Jn=ro(()=>o("div",{class:"form-item-label"},"机器人名称/头像",-1)),Zn={class:"form-item-body robot-name-item"},ea={class:"robot-avetar-upload"},ta=["src"],oa={class:"robot-name-box"},na={class:"form-item"},aa=ro(()=>o("div",{class:"form-item-label"},"简介",-1)),sa={class:"form-item-body"},ia={class:"robot-info-box"},la={class:"robot-name-box"},ra=["src"],ca={class:"robot-name"},da={class:"robot-intro"},ua={__name:"basic-config",setup(e){const t=I(!1),{robotInfo:s,updateRobotInfo:l}=ie("robotInfo"),n=F({robot_name:"",robot_avatar:"",robot_avatar_url:"",robot_intro:""}),r=()=>{l({...se(n)}),t.value=!1},a=p=>{let b=p[0];return n.robot_avatar=b,Mo(b).then(h=>{n.robot_avatar_url=h}),!1},u=()=>{n.robot_name=s.robot_name,n.robot_intro=s.robot_intro,n.robot_avatar=s.robot_avatar,n.robot_avatar_url=s.robot_avatar_url};return(p,b)=>{const h=et,y=ut;return $(),N($e,{class:"basic-config",title:"基本配置","icon-name":"jibenpeizhi",isEdit:t.value,"onUpdate:isEdit":b[2]||(b[2]=c=>t.value=c),onSave:r,onEdit:u},{default:m(()=>[be(o("div",Qn,[o("div",Yn,[Jn,o("div",Zn,[i(zo,{accept:"image/*",onChange:a},{default:m(()=>[o("div",ea,[n.robot_avatar_url?($(),O("img",{key:0,class:"robot-avetar",src:n.robot_avatar_url},null,8,ta)):_e("",!0)])]),_:1}),o("div",oa,[i(h,{value:n.robot_name,"onUpdate:value":b[0]||(b[0]=c=>n.robot_name=c),placeholder:"请输入机器人名称"},null,8,["value"])])])]),o("div",na,[aa,o("div",sa,[i(y,{rows:3,value:n.robot_intro,"onUpdate:value":b[1]||(b[1]=c=>n.robot_intro=c),placeholder:"请输入机器人简介，比如 ZHIMA CHATAI 基于大语言模型提供ZHIMA CHATAI 产品帮助。","allow-clear":""},null,8,["value"])])])],512),[[he,t.value]]),be(o("div",ia,[o("div",la,[o("img",{class:"robot-avatar",src:L(s).robot_avatar_url,alt:""},null,8,ra),o("span",ca,z(L(s).robot_name),1)]),o("div",da,z(L(s).robot_intro||"还没有设置机器人介绍，快来写一段简介吧"),1)],512),[[he,!t.value]])]),_:1},8,["isEdit"])}}},_a=Q(ua,[["__scopeId","data-v-899bcb03"]]),pa={class:"robot-form-box"},va={class:"form-item"},ma={class:"robot-info-box"},fa={class:"robot-prompt"},ba={__name:"system-prompt-words",setup(e){const t=I(!1),{robotInfo:s,updateRobotInfo:l}=ie("robotInfo"),n=F({prompt:""}),r=()=>{l({...se(n)}),t.value=!1},a=()=>{n.prompt=s.prompt};return(u,p)=>{const b=ut;return $(),N($e,{class:"setting-box",title:"系统提示词","icon-name":"xitongtishici",isEdit:t.value,"onUpdate:isEdit":p[1]||(p[1]=h=>t.value=h),onSave:r,onEdit:a},{default:m(()=>[be(o("div",pa,[o("div",va,[i(b,{rows:4,value:n.prompt,"onUpdate:value":p[0]||(p[0]=h=>n.prompt=h),placeholder:"请输入提示词","allow-clear":""},null,8,["value"])])],512),[[he,t.value]]),be(o("div",ma,[o("div",fa,z(L(s).prompt),1)],512),[[he,!t.value]])]),_:1},8,["isEdit"])}}},ha=Q(ba,[["__scopeId","data-v-49969601"]]),_t=e=>(ge("data-v-49351a57"),e=e(),ye(),e),ga={class:"actions-box"},ya={class:"model-name"},$a={key:0,class:"form-box"},xa={class:"form-item"},ka=_t(()=>o("div",{class:"form-item-label"},[o("span",null,"LLM模型 ")],-1)),wa={class:"form-item-body"},Sa=["src"],Ca={key:0},Ia={key:1},Ta={class:"form-item"},qa={class:"form-item-label"},Ea=_t(()=>o("span",null,"温度 ",-1)),Ra={class:"form-item-body"},La={class:"number-box"},Pa={class:"number-slider-box"},Oa={class:"number-input-box"},Aa={class:"form-item"},Ba={class:"form-item-label"},Ma=_t(()=>o("span",null,"最大token ",-1)),Na={class:"form-item-body"},Da={class:"number-box"},Ua={class:"number-slider-box"},za={class:"number-input-box"},Wa={class:"form-item"},Ha={class:"form-item-label"},Va=_t(()=>o("span",null,"上下文数量 ",-1)),Ka={class:"form-item-body"},Ga={class:"number-box"},ja={class:"number-slider-box"},Xa={class:"number-input-box"},Fa={__name:"model-settings",setup(e){const t=["azure","ollama","xinference","openaiAgent"],s=F({sm:24,md:24,lg:12,xl:8,xxl:8}),l=I([]),n=I(!1),{robotInfo:r,updateRobotInfo:a}=ie("robotInfo"),u=F({use_model:void 0,model_config_id:"",temperature:0,max_token:0,context_pair:0}),p=I(""),b=I(""),h=I(""),y=(v,d)=>{p.value=d.current_obj.model_define,u.model_config_id=d.current_obj.id||d.model_config_id},c=()=>{h.value=u.use_model,t.indexOf(p.value)>-1&&(u.use_model="默认"),a({...se(u)}),n.value=!1},_=v=>{v||(p.value=b.value),t.indexOf(p.value)>-1?u.use_model=h.value:u.use_model=r.use_model,u.model_config_id=r.model_config_id,u.temperature=r.temperature,u.max_token=r.max_token,u.context_pair=r.context_pair,n.value=v};function x(v,d,q){const w=new Set(v.map(f=>f.model_define));return d.filter(f=>{let g=f[q];w.has(g)&&v.filter(T=>{if(T.model_define==g)return T.children=Do(T.children,f.children),!1})}),v}return(()=>{Yt({model_type:"LLM"}).then(v=>{h.value=r.use_model;let d=v.data||[],q=[];l.value=d.map(w=>{q=[];for(let f=0;f<w.model_info.llm_model_list.length;f++){const g=w.model_info.llm_model_list[f];t.indexOf(w.model_info.model_define)>-1&&r.model_config_id==w.model_config.id&&(h.value=w.model_config.deployment_name,p.value=w.model_info.model_define,b.value=w.model_info.model_define),q.push({name:g,deployment_name:w.model_config.deployment_name,id:w.model_config.id,model_define:w.model_info.model_define})}return{id:w.model_config.id,name:w.model_info.model_name,model_define:w.model_info.model_define,icon:w.model_info.model_icon_url,children:q,deployment_name:w.model_config.deployment_name}}),l.value=x(No(l.value,"model_define"),l.value,"model_define")})})(),(v,d)=>{const q=Ue,w=xt,f=St,g=Jt,T=Zt,C=eo,E=Ko,P=ze,S=to,H=wt,le=Go;return $(),N($e,{class:"setting-box",title:"模型设置","icon-name":"moxingshezhi",isEdit:n.value,"onUpdate:isEdit":d[9]||(d[9]=A=>n.value=A)},{extra:m(()=>[o("div",ga,[n.value?($(),N(w,{key:0,gap:8},{default:m(()=>[i(q,{onClick:c,size:"small",type:"primary"},{default:m(()=>[D("保存")]),_:1}),i(q,{onClick:d[0]||(d[0]=A=>_(!1)),size:"small"},{default:m(()=>[D("取消")]),_:1})]),_:1})):($(),O(ne,{key:1},[o("span",ya,z(h.value),1),i(f,{type:"vertical"}),i(q,{onClick:d[1]||(d[1]=A=>_(!0)),size:"small"},{default:m(()=>[D("修改")]),_:1})],64))])]),default:m(()=>[n.value?($(),O("div",$a,[i(le,{gutter:[32,16]},{default:m(()=>[i(E,nt(at(s)),{default:m(()=>[o("div",xa,[ka,o("div",wa,[i(C,{value:u.use_model,"onUpdate:value":d[2]||(d[2]=A=>u.use_model=A),placeholder:"请选择LLM模型",onChange:y,style:{width:"100%"}},{default:m(()=>[($(!0),O(ne,null,ue(l.value,A=>($(),N(T,{key:A.id},{label:m(()=>[i(w,{align:"center",gap:6},{default:m(()=>[o("img",{class:"model-icon",src:A.icon,alt:""},null,8,Sa),D(z(A.name),1)]),_:2},1024)]),default:m(()=>[($(!0),O(ne,null,ue(A.children,M=>($(),N(g,{value:t.indexOf(A.model_define)>-1&&M.deployment_name?M.deployment_name:M.name,model_config_id:A.id,current_obj:M,key:M.name+M.id},{default:m(()=>[t.indexOf(A.model_define)>-1&&M.deployment_name?($(),O("span",Ca,z(M.deployment_name),1)):($(),O("span",Ia,z(M.name),1))]),_:2},1032,["value","model_config_id","current_obj"]))),128))]),_:2},1024))),128))]),_:1},8,["value"])])])]),_:1},16),i(E,nt(at(s)),{default:m(()=>[o("div",Ta,[o("div",qa,[Ea,i(P,null,{title:m(()=>[D("温度越低，回答越严谨。温度越高，回答越发散。")]),default:m(()=>[i(L(we),{class:"question-icon"})]),_:1})]),o("div",Ra,[o("div",La,[o("div",Pa,[i(S,{class:"custom-slider",value:u.temperature,"onUpdate:value":d[3]||(d[3]=A=>u.temperature=A),min:0,max:2,step:.1},null,8,["value"])]),o("div",Oa,[i(H,{value:u.temperature,"onUpdate:value":d[4]||(d[4]=A=>u.temperature=A),min:0,max:2,step:.1},null,8,["value"])])])])])]),_:1},16),i(E,nt(at(s)),{default:m(()=>[o("div",Aa,[o("div",Ba,[Ma,i(P,null,{title:m(()=>[D("问题+答案的最大token数，如果出现回答被截断，可调高此值")]),default:m(()=>[i(L(we),{class:"question-icon"})]),_:1})]),o("div",Na,[o("div",Da,[o("div",Ua,[i(S,{class:"custom-slider",value:u.max_token,"onUpdate:value":d[5]||(d[5]=A=>u.max_token=A),min:0,max:100*1024},null,8,["value"])]),o("div",za,[i(H,{value:u.max_token,"onUpdate:value":d[6]||(d[6]=A=>u.max_token=A),min:0,max:100*1024},null,8,["value"])])])])])]),_:1},16),i(E,nt(at(s)),{default:m(()=>[o("div",Wa,[o("div",Ha,[Va,i(P,null,{title:m(()=>[D("提示词中携带的历史聊天记录轮次。设置为0则不携带聊天记录。最多设置10轮。注意，携带的历史聊天记录越多，消耗的token相应也就越多。")]),default:m(()=>[i(L(we),{class:"question-icon"})]),_:1})]),o("div",Ka,[o("div",Ga,[o("div",ja,[i(S,{class:"custom-slider",value:u.context_pair,"onUpdate:value":d[7]||(d[7]=A=>u.context_pair=A),min:0,max:10},null,8,["value"])]),o("div",Xa,[i(H,{value:u.context_pair,"onUpdate:value":d[8]||(d[8]=A=>u.context_pair=A),min:0,max:10},null,8,["value"])])])])])]),_:1},16)]),_:1})])):_e("",!0)]),_:1},8,["isEdit"])}}},Qa=Q(Fa,[["__scopeId","data-v-49351a57"]]),Ya={class:"library-checkbox-box"},Ja={class:"list-tools"},Za={class:"list-box",ref:"scrollContainer"},es={class:"library-name"},ts={class:"library-desc"},os={__name:"library-select-alert",emits:["change"],setup(e,{expose:t,emit:s}){const l=s,n=F({indeterminate:!1,checkAll:!1,checkedList:[]}),r=I(!1),a=v=>{c(),n.checkedList=v,r.value=!0},u=()=>{r.value=!1,y()},p=I(""),b=()=>{c()},h=I([]),y=()=>{l("change",[...n.checkedList])},c=async()=>{const v=await oo({library_name:p.value});if(v){let d=v.data||[];h.value=d}},_=I(!1),x=async()=>{_.value=!0,await c(),_.value=!1,Pe.success("刷新完成")},k=()=>{window.open("/#/library/add")};return t({open:a}),(v,d)=>{const q=Qo,w=et,f=Ue,g=jo,T=Xo,C=Fo,E=Ze;return $(),N(E,{width:"746px",open:r.value,"onUpdate:open":d[2]||(d[2]=P=>r.value=P),title:"关联知识库",onOk:u},{default:m(()=>[o("div",Ya,[i(q,{message:"请选择关联知识库，机器人会根据知识库内上传的文档回复用户的提问。每个机器人最多关联5个知识库",type:"info"}),o("div",Ja,[o("div",null,[i(w,{style:{width:"282px"},value:p.value,"onUpdate:value":d[0]||(d[0]=P=>p.value=P),placeholder:"请输入知识库名称搜索",onChange:b},{suffix:m(()=>[i(L(Ho),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),o("div",null,[i(f,{style:{"margin-right":"8px"},onClick:x},{default:m(()=>[i(L(Un)),D(" 刷新 ")]),_:1}),i(f,{type:"primary",ghost:"",onClick:k},{default:m(()=>[D("新建知识库")]),_:1})])]),i(C,{spinning:_.value,delay:100},{default:m(()=>[i(T,{value:n.checkedList,"onUpdate:value":d[1]||(d[1]=P=>n.checkedList=P),style:{width:"100%"}},{default:m(()=>[o("div",Za,[($(!0),O(ne,null,ue(h.value,P=>($(),O("div",{class:"list-item-wraapper",key:P.id},[i(g,{class:"list-item",value:P.id},{default:m(()=>[o("div",es,z(P.library_name),1),o("div",ts,z(P.library_intro),1)]),_:2},1032,["value"])]))),128))],512)]),_:1},8,["value"])]),_:1},8,["spinning"])])]),_:1},8,["open"])}}},ns=Q(os,[["__scopeId","data-v-f9210a6f"]]),pt=e=>(ge("data-v-e6571a88"),e=e(),ye(),e),as={class:"recall-settings-box"},ss={class:"form-box"},is={class:"form-item is-required"},ls=pt(()=>o("div",{class:"form-item-label"},[o("span",null,"检索模式")],-1)),rs={class:"form-item-body"},cs={class:"retrieval-mode-items"},ds=["onClick"],us={class:"retrieval-mode-title"},_s={class:"title-text"},ps={class:"retrieval-mode-desc"},vs={class:"form-item"},ms={class:"form-item-label"},fs=pt(()=>o("span",null,"Top K ",-1)),bs={class:"form-item-body"},hs={class:"number-box"},gs={class:"number-slider-box"},ys={class:"number-input-box"},$s={class:"form-item"},xs={class:"form-item-label"},ks=pt(()=>o("span",null,"相似度阈值 ",-1)),ws={class:"form-item-body"},Ss={class:"number-box"},Cs={class:"number-slider-box"},Is={class:"number-input-box"},Ts={class:"form-item"},qs={class:"form-item-label"},Es=pt(()=>o("span",null,"Rerank模型",-1)),Rs={class:"form-item-body"},Ls=["src"],Ps={__name:"recall-settings-alert",emits:["change"],setup(e,{expose:t,emit:s}){const l=s,n=I([{iconName:"search",title:"混合检索",value:1,isRecommendation:!0,desc:"同时执行全文检索和向量检索，使用RRF算法进行排序，从两中查询结果中选择更匹配用户问题的结果"},{iconName:"file-search",title:"向量检索",value:2,desc:"将用户提问转成向量之后与知识库分段匹配相似度，返回相似度高的结果"},{iconName:"comment-search",title:"全文检索",value:3,desc:"通过分词匹配文档中的词汇，返回包含这些词汇的文本片段"}]),r=F({rerank_status:0,rerank_use_model:void 0,rerank_model_config_id:void 0,search_type:1}),a=I(!1),u=k=>{x(),r.rerank_status=k.rerank_status||0,r.rerank_use_model=k.rerank_use_model||void 0,r.rerank_model_config_id=k.rerank_model_config_id||"",r.top_k=k.top_k,r.similarity=k.similarity,r.search_type=k.search_type,a.value=!0},p=(k,v)=>{r.rerank_model_config_id=v.rerank_model_config_id},b=k=>{r.search_type=k},h=()=>r.rerank_status==1&&!r.rerank_model_config_id,y=()=>{if(h())return Pe.error("请选择Rerank模型");a.value=!1,c()},c=()=>{l("change",se(r))},_=I([]),x=()=>{Yt({model_type:"RERANK"}).then(k=>{let v=k.data||[];_.value=v.map(d=>({id:d.model_config.id,name:d.model_info.model_name,icon:d.model_info.model_icon_url,children:d.model_info.rerank_model_list}))})};return t({open:u}),(k,v)=>{const d=De,q=ze,w=to,f=wt,g=We,T=Jt,C=Zt,E=eo,P=Ze;return $(),N(P,{width:"472px",open:a.value,"onUpdate:open":v[6]||(v[6]=S=>a.value=S),title:"召回设置",onOk:y},{default:m(()=>[o("div",as,[o("div",ss,[o("div",is,[ls,o("div",rs,[o("div",cs,[($(!0),O(ne,null,ue(n.value,S=>($(),O("div",{class:$t(["retrieval-mode-item",{active:r.search_type==S.value}]),key:S.value,onClick:H=>b(S.value)},[r.search_type==S.value?($(),N(d,{key:0,class:"check-arrow",name:"check-arrow-filled"})):_e("",!0),o("div",us,[i(d,{name:S.iconName,class:"title-icon"},null,8,["name"]),o("span",_s,z(S.title),1),S.isRecommendation?($(),N(d,{key:0,class:"recommendation-icon",name:"recommendation"})):_e("",!0)]),o("div",ps,z(S.desc),1)],10,ds))),128))])])]),o("div",vs,[o("div",ms,[fs,i(q,null,{title:m(()=>[D("最多从知识库中召回分段数，最低为1，最高为10。召回分段数越多，消耗的token也会越多。")]),default:m(()=>[i(L(we),{class:"question-icon"})]),_:1})]),o("div",bs,[o("div",hs,[o("div",gs,[i(w,{class:"custom-slider",value:r.top_k,"onUpdate:value":v[0]||(v[0]=S=>r.top_k=S),min:1,max:10},null,8,["value"])]),o("div",ys,[i(f,{value:r.top_k,"onUpdate:value":v[1]||(v[1]=S=>r.top_k=S),min:1,max:10},null,8,["value"])])])])]),o("div",$s,[o("div",xs,[ks,i(q,null,{title:m(()=>[D("召回时，只会召回相似度大于阈值的文本分段。")]),default:m(()=>[i(L(we),{class:"question-icon"})]),_:1})]),o("div",ws,[o("div",Ss,[o("div",Cs,[i(w,{class:"custom-slider",value:r.similarity,"onUpdate:value":v[2]||(v[2]=S=>r.similarity=S),min:0,max:1,step:.01},null,8,["value"])]),o("div",Is,[i(f,{value:r.similarity,"onUpdate:value":v[3]||(v[3]=S=>r.similarity=S),min:0,max:1,step:.01},null,8,["value"])])])])]),o("div",Ts,[o("div",qs,[Es,D("   "),i(g,{checkedValue:1,unCheckedValue:0,checked:r.rerank_status,"onUpdate:checked":v[4]||(v[4]=S=>r.rerank_status=S)},null,8,["checked"])]),o("div",Rs,[i(E,{value:r.rerank_use_model,"onUpdate:value":v[5]||(v[5]=S=>r.rerank_use_model=S),placeholder:"请选择Rerank模型",onChange:p,style:{width:"320px"}},{default:m(()=>[($(!0),O(ne,null,ue(_.value,S=>($(),N(C,{key:S.id},{label:m(()=>[o("span",null,[o("img",{class:"model-icon",src:S.icon,alt:""},null,8,Ls)])]),default:m(()=>[($(!0),O(ne,null,ue(S.children,H=>($(),N(T,{value:H,rerank_model_config_id:S.id,key:H},{default:m(()=>[o("span",null,z(H),1)]),_:2},1032,["value","rerank_model_config_id"]))),128))]),_:2},1024))),128))]),_:1},8,["value"])])])])])]),_:1},8,["open"])}}},Os=Q(Ps,[["__scopeId","data-v-e6571a88"]]),As={class:"actions-box"},Bs={key:0,class:"library-list"},Ms=["onClick"],Ns={class:"library-name"},Ds={class:"library-intro"},Us={__name:"index",setup(e){const t=I(!1),{robotInfo:s,updateRobotInfo:l}=ie("robotInfo"),n=F({library_ids:[],rerank_status:0,rerank_use_model:void 0,rerank_model_config_id:"",top_k:0,similarity:0,search_type:1}),r=I([]),a=I(null),u=X(()=>r.value.filter(v=>n.library_ids.includes(v.id))),p=v=>{let d=n.library_ids.indexOf(v.id);n.library_ids.splice(d,1),x()},b=v=>{n.library_ids=[...v],x()},h=()=>{a.value.open([...n.library_ids])},y=I(null),c=()=>{y.value.open(se(n))},_=v=>{n.rerank_status=v.rerank_status,n.rerank_use_model=v.rerank_use_model,n.rerank_model_config_id=v.rerank_model_config_id,n.top_k=v.top_k,n.similarity=v.similarity,n.search_type=v.search_type,x()},x=()=>{let v={...se(n)};v.library_ids=v.library_ids.join(","),l({...v})};return(async()=>{const v=await oo();v&&(r.value=v.data||[])})(),Je(()=>{n.library_ids=s.library_ids.split(","),n.rerank_status=s.rerank_status||0,n.rerank_use_model=s.rerank_use_model||void 0,n.rerank_model_config_id=s.rerank_model_config_id||"",n.top_k=s.top_k,n.similarity=s.similarity,n.search_type=s.search_type}),(v,d)=>{const q=Ue,w=xt;return $(),N($e,{class:"setting-box",title:"关联知识库","icon-name":"guanlianzhishiku",isEdit:t.value,"onUpdate:isEdit":d[0]||(d[0]=f=>t.value=f),bodyStyle:{padding:0}},{extra:m(()=>[o("div",As,[i(w,{gap:8},{default:m(()=>[i(q,{size:"small",onClick:c},{default:m(()=>[D("召回设置")]),_:1}),i(q,{size:"small",onClick:h},{default:m(()=>[D("关联知识库")]),_:1})]),_:1})])]),default:m(()=>[u.value.length>0?($(),O("div",Bs,[($(!0),O(ne,null,ue(u.value,f=>($(),O("div",{class:"library-item",key:f.id},[o("span",{class:"close-btn",onClick:g=>p(f)},[i(L(dt))],8,Ms),o("div",Ns,z(f.library_name),1),o("div",Ds,z(f.library_intro),1)]))),128))])):_e("",!0),i(ns,{ref_key:"librarySelectAlertRef",ref:a,onChange:b},null,512),i(Os,{ref_key:"recallSettingsAlertRef",ref:y,onChange:_},null,512)]),_:1},8,["isEdit"])}}},zs=Q(Us,[["__scopeId","data-v-96e96ac2"]]),Ws={class:"form-box"},Hs={class:"question-title"},Vs={class:"question-options"},Ks={class:"question-option"},Gs={class:"drag-btn"},js={class:"action-box"},Xs={class:"robot-info-box"},Fs={class:"robot-welcome-content"},Qs={class:"robot-welcome-question"},Ys={__name:"welcome-words",setup(e){const t=I(!1),s=I(!1),{robotInfo:l,updateRobotInfo:n,scrollBoxToBottom:r}=ie("robotInfo"),a=F({welcomes:{content:"",question:[]}}),u=()=>{let c=!1;if(a.welcomes.question.length>0){for(let _=0;_<a.welcomes.question.length;_++)if(!a.welcomes.question[_].content){c=_+1;break}}return c},p=()=>{a.welcomes.question.push({content:"",id:lt(8)})},b=c=>{a.welcomes.question.splice(c,1)},h=()=>{if(!a.welcomes.content)return Pe.error("请输入欢迎语");if(u())return Pe.error("引导问题内容不能为空");n({...se(a)}),t.value=!1},y=()=>{let c={...l.welcomes},_=[];c.question.forEach(({content:x,id:k})=>{let v={id:k,content:x};v.id||(v.id=lt(6)),_.push(v)}),a.welcomes.content=c.content,a.welcomes.question=_};return(c,_)=>{const x=ut,k=De,v=et;return $(),N($e,{class:"setting-box",title:"欢迎语","icon-name":"huanyingyu",isEdit:t.value,"onUpdate:isEdit":_[4]||(_[4]=d=>t.value=d),onSave:h,onEdit:y},{default:m(()=>[be(o("div",Ws,[o("div",Hs,[i(x,{value:a.welcomes.content,"onUpdate:value":_[0]||(_[0]=d=>a.welcomes.content=d),placeholder:"请输入欢迎语"},null,8,["value"])]),o("div",Vs,[i(L(kt),{modelValue:a.welcomes.question,"onUpdate:modelValue":_[1]||(_[1]=d=>a.welcomes.question=d),"item-key":"id",handle:".drag-btn",onStart:_[2]||(_[2]=d=>s.value=!0),onEnd:_[3]||(_[3]=d=>s.value=!1)},{item:m(({element:d,index:q})=>[o("div",Ks,[o("span",Gs,[i(k,{name:"drag"})]),i(v,{class:"question-option-content",value:d.content,"onUpdate:value":w=>d.content=w,placeholder:"请输入问题"},null,8,["value","onUpdate:value"]),o("div",js,[i(L(dt),{class:"del-btn",onClick:w=>b(q)},null,8,["onClick"])])])]),_:1},8,["modelValue"]),o("div",{class:"add-btn",onClick:p},[i(L(Ct),{class:"add-btn-icon"}),D("添加引导问题 ")])])],512),[[he,t.value]]),be(o("div",Xs,[o("div",Fs,z(L(l).welcomes.content),1),o("div",Qs,[($(!0),O(ne,null,ue(L(l).welcomes.question,(d,q)=>($(),O("div",{class:"question-item",key:q},z(d.content),1))),128))])],512),[[he,!t.value]])]),_:1},8,["isEdit"])}}},Js=Q(Ys,[["__scopeId","data-v-ea227a87"]]),Zs=e=>(ge("data-v-bc797bf6"),e=e(),ye(),e),ei=Zs(()=>o("span",null,"仅知识库模式下，用户提问没有在知识库中大于score阈值的分段时，会直接回复未知问题提示语。",-1)),ti={class:"form-box"},oi={class:"question-title"},ni={class:"question-options"},ai={class:"question-option"},si={class:"drag-btn"},ii={class:"action-box"},li={class:"robot-info-box"},ri={class:"robot-unknown-content"},ci={class:"robot-unknown-question"},di={__name:"unknown-problem-prompt",setup(e){const t=I(!1),s=I(!1),{robotInfo:l,updateRobotInfo:n,scrollBoxToBottom:r}=ie("robotInfo"),a=F({unknown_question_prompt:{content:"",question:[]}}),u=()=>{a.unknown_question_prompt.question.push({content:"",id:lt(8)}),bo(()=>{r()})},p=y=>{a.unknown_question_prompt.question.splice(y,1)},b=()=>{n({...se(a)}),t.value=!1},h=()=>{let y={...l.unknown_question_prompt},c=[];y.question&&y.question.forEach(({content:_,id:x})=>{let k={id:x,content:_};k.id||(k.id=lt(6)),c.push(k)}),y.content&&(a.unknown_question_prompt.content=y.content),c&&(a.unknown_question_prompt.question=c)};return Ne(()=>{}),(y,c)=>{const _=ze,x=ut,k=De,v=et;return $(),N($e,{class:"setting-box",title:"未知问题提示语","icon-name":"unknown-prompt",isEdit:t.value,"onUpdate:isEdit":c[4]||(c[4]=d=>t.value=d),onSave:b,onEdit:h},{tip:m(()=>[i(_,{placement:"top",overlayInnerStyle:{width:"400px"}},{title:m(()=>[ei]),default:m(()=>[i(L(we))]),_:1})]),default:m(()=>[be(o("div",ti,[o("div",oi,[i(x,{value:a.unknown_question_prompt.content,"onUpdate:value":c[0]||(c[0]=d=>a.unknown_question_prompt.content=d),placeholder:"请输入未知问题提示语"},null,8,["value"])]),o("div",ni,[i(L(kt),{modelValue:a.unknown_question_prompt.question,"onUpdate:modelValue":c[1]||(c[1]=d=>a.unknown_question_prompt.question=d),"item-key":"id",handle:".drag-btn",onStart:c[2]||(c[2]=d=>s.value=!0),onEnd:c[3]||(c[3]=d=>s.value=!1)},{item:m(({element:d,index:q})=>[o("div",ai,[o("span",si,[i(k,{name:"drag"})]),i(v,{class:"question-option-content",value:d.content,"onUpdate:value":w=>d.content=w,placeholder:"请输入问题"},null,8,["value","onUpdate:value"]),o("div",ii,[i(L(dt),{class:"del-btn",onClick:w=>p(q)},null,8,["onClick"])])])]),_:1},8,["modelValue"]),o("div",{class:"add-btn",onClick:u},[i(L(Ct),{class:"add-btn-icon"}),D("添加引导问题 ")])])],512),[[he,t.value]]),be(o("div",li,[o("div",ri,z(L(l).unknown_question_prompt.content),1),o("div",ci,[($(!0),O(ne,null,ue(L(l).unknown_question_prompt.question,(d,q)=>($(),O("div",{class:"question-item",key:q},z(d.content),1))),128))])],512),[[he,!t.value]])]),_:1},8,["isEdit"])}}},ui=Q(di,[["__scopeId","data-v-bc797bf6"]]),co=e=>(ge("data-v-c60b8d8e"),e=e(),ye(),e),_i=co(()=>o("span",null,null,-1)),pi=co(()=>o("div",{class:"robot-info-box"},[o("div",{class:"robot-prompt"}," 开启后，进行知识库搜索时，会根据对话记录，利用AI补全问题缺失的信息 ")],-1)),vi={__name:"problem-optimization",setup(e){I(!1);const{robotInfo:t,updateRobotInfo:s}=ie("robotInfo");F({prompt:""});const l=n=>{s({})};return(n,r)=>{const a=We;return $(),N($e,{class:"setting-box",title:"问题优化","icon-name":"problem-optimization"},{extra:m(()=>[_i]),default:m(()=>[pi,i(a,{onChange:l,class:"switch-item",checkedValue:"true",unCheckedValue:"false",checked:L(t).enable_question_optimize,"onUpdate:checked":r[0]||(r[0]=u=>L(t).enable_question_optimize=u),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1})}}},mi=Q(vi,[["__scopeId","data-v-c60b8d8e"]]),uo=e=>(ge("data-v-34918831"),e=e(),ye(),e),fi=uo(()=>o("span",null,null,-1)),bi=uo(()=>o("div",{class:"robot-info-box"},[o("div",{class:"robot-prompt"}," 开启后，机器人回答问题后，自动根据对话内容提供3条用户提问建议 ")],-1)),hi={__name:"suggested-issues",setup(e){I(!1);const{robotInfo:t,updateRobotInfo:s}=ie("robotInfo"),l=n=>{s({})};return(n,r)=>{const a=We;return $(),N($e,{class:"setting-box",title:"用户问题建议","icon-name":"suggested-issues"},{extra:m(()=>[fi]),default:m(()=>[bi,i(a,{onChange:l,class:"switch-item",checkedValue:"true",unCheckedValue:"false",checked:L(t).enable_question_guide,"onUpdate:checked":r[0]||(r[0]=u=>L(t).enable_question_guide=u),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1})}}},gi=Q(hi,[["__scopeId","data-v-34918831"]]),Tt=e=>(ge("data-v-a0ec9e93"),e=e(),ye(),e),yi={class:"direct-title"},$i={class:"direct-desc"},xi={class:"qa"},ki={class:"prompt-form-item-label"},wi=Tt(()=>o("span",{class:"qa-title"},"QA文档直接回复答案",-1)),Si={class:"direct-switch"},Ci={class:"similarity"},Ii=Tt(()=>o("span",null,"相似度超过",-1)),Ti={class:"number-input-box"},qi=Tt(()=>o("span",null,"时直接回复答案",-1)),Ei={__name:"chat-edit-alert",emits:["save"],setup(e,{expose:t,emit:s}){const l=s,n=I(1),r=()=>[{direct_id:1,direct_title:"仅知识库模式",direct_desc:"用户提问时,从知识库检索文档,大语言模型(LLM)根据检索出来的文档分段进行回复。如果没有符合的分段，则不由LLM回复，直接回复未知问题提示语。",chat_type:"1",library_qa_direct_reply_score:"0.900",library_qa_direct_reply_switch:0,isQaDirectReply:!0},{direct_id:3,direct_title:"混合模式",direct_desc:"用户提问时,从知识库检索文档,大语言模型(LLM)根据检索出来的文档分段进行回复。如索果没有符合的分段,则由大语言模型自行组织回复。",chat_type:"3",mixture_qa_direct_reply_score:"0.900",mixture_qa_direct_reply_switch:0,isQaDirectReply:!0},{direct_id:2,direct_title:"直连模式",direct_desc:"用户提问时，直接由LLM生成答案，不从关联知识库中检索。",chat_type:"2",isQaDirectReply:!1}],a=F(r()),u=I(!1),p=F({chat_type:"",library_qa_direct_reply_score:"",library_qa_direct_reply_switch:"false",mixture_qa_direct_reply_score:"",mixture_qa_direct_reply_switch:"false"}),b=()=>{p.chat_type=n.value.toString(),a.forEach(c=>{c.chat_type==n.value&&(p.chat_type=="3"?(p.mixture_qa_direct_reply_switch=c.mixture_qa_direct_reply_switch==1?"true":"false",p.mixture_qa_direct_reply_score=c.mixture_qa_direct_reply_score.toString()):p.chat_type=="1"&&(p.library_qa_direct_reply_switch=c.library_qa_direct_reply_switch==1?"true":"false",p.library_qa_direct_reply_score=c.library_qa_direct_reply_score.toString()))}),h(),Object.assign(a,r()),u.value=!1},h=()=>{l("save",se(p))};Ne(()=>{});const y=c=>{n.value=parseInt(c.chat_type),p.chat_type=c.chat_type,p.library_qa_direct_reply_score=c.library_qa_direct_reply_score,p.library_qa_direct_reply_switch=c.library_qa_direct_reply_switch,p.mixture_qa_direct_reply_score=c.mixture_qa_direct_reply_score,p.mixture_qa_direct_reply_switch=c.mixture_qa_direct_reply_switch,a.forEach(_=>{_.chat_type=="3"?(_.mixture_qa_direct_reply_score=c.mixture_qa_direct_reply_score,_.mixture_qa_direct_reply_switch=c.mixture_qa_direct_reply_switch=="true"?1:0):_.chat_type=="1"&&(_.library_qa_direct_reply_score=c.library_qa_direct_reply_score,_.library_qa_direct_reply_switch=c.library_qa_direct_reply_switch=="true"?1:0)}),u.value=!0};return fe(()=>u.value,c=>{c===!1&&Object.assign(a,r())},{immediate:!0}),t({open:y}),(c,_)=>{const x=ze,k=We,v=wt,d=Yo,q=Jo,w=Ze;return $(),N(w,{width:"746px",open:u.value,"onUpdate:open":_[1]||(_[1]=f=>u.value=f),title:"聊天模式设置",onOk:b},{default:m(()=>[i(q,{class:"direct-box",value:n.value,"onUpdate:value":_[0]||(_[0]=f=>n.value=f)},{default:m(()=>[($(!0),O(ne,null,ue(a,f=>($(),N(d,{class:$t(["direct-item",{active:n.value==f.direct_id}]),value:f.direct_id,key:f.direct_id},{default:m(()=>[o("div",yi,z(f.direct_title),1),o("div",$i,z(f.direct_desc),1),be(o("div",xi,[o("div",ki,[wi,i(x,null,ho({default:m(()=>[i(L(we),{class:"question-icon"})]),_:2},[f.chat_type=="1"?{name:"title",fn:m(()=>[D("仅知识库模式下，检索出来的score排名最高的分段为QA模式，且score超过置顶阈值是，直接回复分段的答案，不经过大语言模型（LLM）生成回复。")]),key:"0"}:f.chat_type=="3"?{name:"title",fn:m(()=>[D("混合模式下，检索出来的score排名最高的分段为QA模式，且score超过置顶阈值是，直接回复分段的答案，不经过大语言模型（LLM）生成回复。")]),key:"1"}:void 0]),1024),o("div",Si,[f.chat_type=="1"?($(),N(k,{key:0,checkedValue:1,unCheckedValue:0,checked:f.library_qa_direct_reply_switch,"onUpdate:checked":g=>f.library_qa_direct_reply_switch=g},null,8,["checked","onUpdate:checked"])):f.chat_type=="3"?($(),N(k,{key:1,checkedValue:1,unCheckedValue:0,checked:f.mixture_qa_direct_reply_switch,"onUpdate:checked":g=>f.mixture_qa_direct_reply_switch=g},null,8,["checked","onUpdate:checked"])):_e("",!0)])])],512),[[he,f.isQaDirectReply&&n.value==f.direct_id]]),be(o("div",Ci,[Ii,o("div",Ti,[f.chat_type=="1"?($(),N(v,{key:0,value:f.library_qa_direct_reply_score,"onUpdate:value":g=>f.library_qa_direct_reply_score=g,disabled:!f.library_qa_direct_reply_switch,min:0,max:1,step:.01},null,8,["value","onUpdate:value","disabled"])):f.chat_type=="3"?($(),N(v,{key:1,value:f.mixture_qa_direct_reply_score,"onUpdate:value":g=>f.mixture_qa_direct_reply_score=g,disabled:!f.mixture_qa_direct_reply_switch,min:0,max:1,step:.01},null,8,["value","onUpdate:value","disabled"])):_e("",!0)]),qi],512),[[he,f.isQaDirectReply&&n.value==f.direct_id]])]),_:2},1032,["class","value"]))),128))]),_:1},8,["value"])]),_:1},8,["open"])}}},Ri=Q(Ei,[["__scopeId","data-v-a0ec9e93"]]),qt=e=>(ge("data-v-2a920ba8"),e=e(),ye(),e),Li=qt(()=>o("span",null,"仅知识库模式：用户提问时，从知识库检索文档，大语言模型（LLM）根据检索出来的文档分段进行回复。如果没有符合的分段，则不由LLM回复，直接回复未知问题提示语。",-1)),Pi=qt(()=>o("br",null,null,-1)),Oi=qt(()=>o("span",null,"直连模式：用户提问时，直接由LLM生成答案，不从关联知识库中检索。",-1)),Ai={class:"actions-box"},Bi={class:"model-name"},Mi={class:"form-box"},Ni={__name:"index",setup(e){const t=I(!1),s=I(null),{robotInfo:l,updateRobotInfo:n}=ie("robotInfo"),r=F({chat_type:l.chat_type,library_qa_direct_reply_score:l.library_qa_direct_reply_score,library_qa_direct_reply_switch:l.library_qa_direct_reply_switch,mixture_qa_direct_reply_score:l.mixture_qa_direct_reply_score,mixture_qa_direct_reply_switch:l.mixture_qa_direct_reply_switch}),a=b=>{r.chat_type=b.chat_type,r.library_qa_direct_reply_score=b.library_qa_direct_reply_score,r.library_qa_direct_reply_switch=b.library_qa_direct_reply_switch,r.mixture_qa_direct_reply_score=b.mixture_qa_direct_reply_score,r.mixture_qa_direct_reply_switch=b.mixture_qa_direct_reply_switch,u()},u=()=>{n({...se(r)}),t.value=!1},p=()=>{s.value.open(se(r)),t.value=!0};return(b,h)=>{const y=ze,c=St,_=Ue;return $(),N($e,{class:"setting-box",title:"聊天模式","icon-name":"chat-mode",isEdit:t.value,"onUpdate:isEdit":h[1]||(h[1]=x=>t.value=x),bodyStyle:{padding:0}},{tip:m(()=>[i(y,{placement:"top",overlayInnerStyle:{width:"400px"}},{title:m(()=>[Li,Pi,Oi]),default:m(()=>[i(L(we))]),_:1})]),extra:m(()=>[o("div",Ai,[o("span",Bi,z(L(l).chat_type=="1"?"仅知识库":L(l).chat_type=="2"?"直连模式":"混合模式"),1),i(c,{type:"vertical"}),i(_,{size:"small",onClick:h[0]||(h[0]=x=>p(!0))},{default:m(()=>[D("修改")]),_:1})])]),default:m(()=>[o("div",Mi,[i(Ri,{ref_key:"ChatEditAlertRef",ref:s,onSave:a},null,512)])]),_:1},8,["isEdit"])}}},Di=Q(Ni,[["__scopeId","data-v-2a920ba8"]]),Ui=e=>(ge("data-v-8d185d5f"),e=e(),ye(),e),zi={class:"switch-box"},Wi={class:"switch-box-body"},Hi={class:"switch-box-header"},Vi={class:"left-box"},Ki={class:"switch-box-title"},Gi={key:0,class:"title-tip"},ji={class:"right-box"},Xi={class:"extra-box"},Fi=Ui(()=>o("div",{class:"extra-box"},null,-1)),Qi={class:"switch-desc"},Yi={class:"switch-box-right"},Ji={__name:"switch-box",props:{iconName:{type:String,default:""},title:{type:String,default:""},value:{type:Boolean,default:!1}},emits:["update:value","change"],setup(e,{emit:t}){const s=t,l=e,n=I(l.value),r=a=>{s("update:value",a),s("change",a)};return(a,u)=>{const p=De,b=We;return $(),O("div",zi,[o("div",Wi,[o("div",Hi,[o("div",Vi,[i(p,{class:"switch-box-icon",name:l.iconName},null,8,["name"]),o("span",Ki,z(l.title),1),a.$slots.tip?($(),O("span",Gi,[Le(a.$slots,"tip",{},void 0,!0)])):_e("",!0)]),o("div",ji,[o("div",Xi,[Le(a.$slots,"extra",{},()=>[Fi],!0)])])]),o("div",Qi,[Le(a.$slots,"default",{},void 0,!0)])]),o("div",Yi,[i(b,{checked:n.value,"onUpdate:checked":u[0]||(u[0]=h=>n.value=h),onChange:r,"checked-children":"开","un-checked-children":"关"},null,8,["checked"])])])}}},Zi=Q(Ji,[["__scopeId","data-v-8d185d5f"]]),el=o("span",null,null,-1),tl=o("div",null,"开启后，在使用H5链接、Web、PC客户端时,可以要求机器人以Markdown格式输出回答",-1),ol={__name:"markdown-setting",setup(e){const{robotInfo:t,updateRobotInfo:s}=ie("robotInfo"),l=I(!1);fe(()=>t.show_type,r=>{l.value=r==1},{immediate:!0});const n=()=>{s({show_type:l.value?1:0})};return(r,a)=>($(),N(Zi,{class:"markdown-setting",title:"Markdown格式输出","icon-name":"jibenpeizhi",value:l.value,"onUpdate:value":a[0]||(a[0]=u=>l.value=u),onChange:n},{extra:m(()=>[el]),default:m(()=>[tl]),_:1},8,["value"]))}},nl="/assets/img/empty-Bx9z1cwf.png",al="/assets/img/phone-head-COM4IpX2.png",sl="/assets/img/phone-body-D1T2Ayr2.png",il="/assets/img/phone-footer-ClQtNpln.png",Oe=e=>(ge("data-v-5125783f"),e=e(),ye(),e),ll={class:"common-problem-box"},rl={class:"left-content-box"},cl={key:0,class:"empty-box"},dl=Oe(()=>o("img",{src:nl,alt:""},null,-1)),ul=Oe(()=>o("div",{class:"title"},"暂无数据",-1)),_l=Oe(()=>o("div",{class:"desc"},"常见问题会显示在每条对话后面,供用户快速提问",-1)),pl={key:1,class:"lists-box"},vl={class:"drag-btn"},ml={class:"title"},fl={class:"opration-box"},bl={class:"preview-box"},hl=Oe(()=>o("div",{class:"phone-head"},[o("img",{class:"head-img",src:al,alt:""})],-1)),gl={class:"phone-body"},yl=Oe(()=>o("div",null,[o("img",{class:"body-img",src:sl,alt:""})],-1)),$l={key:0,class:"question-box"},xl=Oe(()=>o("div",{class:"name"},"常见问题",-1)),kl=Oe(()=>o("div",{class:"phone-footer"},[o("img",{class:"footer-img",src:il,alt:""})],-1)),wl={__name:"common-problem",setup(e){I(!1);const{robotInfo:t,updateRobotInfo:s}=ie("robotInfo"),l=X(()=>t.common_question_list?JSON.parse(t.common_question_list):[]),n=I([]);n.value=l.value,fe(l,()=>{n.value=l.value});const r=At.useForm,a=I(!1),u=I("添加问题"),p=F({question:"",index:-1}),b=F({question:[{message:"请输入问题名称",required:!0}]}),{resetFields:h,validate:y,validateInfos:c}=r(p,b),_=()=>{if(l.value.length>=10)return Pe.error("最多设置10条常用问题");a.value=!0,h(),p.question="",p.index=-1},x=(w,f)=>{a.value=!0,h(),p.question=w,p.index=f},k=w=>{let f=[];f=l.value.filter((g,T)=>w!=T),Ze.confirm({title:"提醒",icon:i(Uo),content:"确定要删除该问题吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk(){s({common_question_list:JSON.stringify(f)})},onCancel(){}})},v=()=>{y().then(()=>{let w=[];p.index>=0?w=l.value.map((f,g)=>g===p.index?p.question:f):w=[p.question,...l.value],s({common_question_list:JSON.stringify(w)}),a.value=!1})},d=w=>{s({})},q=w=>{s({common_question_list:JSON.stringify(n.value)})};return(w,f)=>{const g=ze,T=We,C=St,E=Ue,P=De,S=et,H=on,le=At,A=Ze;return $(),O("div",ll,[o("div",rl,[i($e,{class:"setting-box",title:"常见问题设置","icon-name":"common-quession"},{icon:m(()=>[i(g,null,{title:m(()=>[D("最多10条。开启后，常见问题会显示在每条问答后面")]),default:m(()=>[i(L(we),{class:"quess-icon"})]),_:1})]),extra:m(()=>[i(T,{onChange:d,class:"switch-item",checkedValue:"true",unCheckedValue:"false",checked:L(t).enable_common_question,"onUpdate:checked":f[0]||(f[0]=M=>L(t).enable_common_question=M),"checked-children":"开","un-checked-children":"关"},null,8,["checked"]),i(C,{type:"vertical"}),i(E,{type:"primary",size:"small",onClick:_},{default:m(()=>[D("添加")]),_:1})]),default:m(()=>[l.value.length==0?($(),O("div",cl,[dl,ul,_l,i(E,{onClick:_,type:"primary"},{default:m(()=>[D("立即添加")]),_:1})])):($(),O("div",pl,[i(L(kt),{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=M=>n.value=M),handle:".drag-btn","item-key":"index",onEnd:q},{item:m(({element:M,index:U})=>[($(),O("div",{class:"list-item",key:U},[o("span",vl,[i(P,{name:"drag"})]),o("div",ml,z(M),1),o("div",fl,[i(L(Wo),{onClick:re=>x(M,U)},null,8,["onClick"]),i(L(dt),{onClick:re=>k(U)},null,8,["onClick"])])]))]),_:1},8,["modelValue"])]))]),_:1})]),o("div",bl,[hl,o("div",gl,[yl,l.value.length&&L(t).enable_common_question=="true"?($(),O("div",$l,[xl,($(!0),O(ne,null,ue(l.value,M=>($(),O("div",{class:"list-item",key:M},z(M),1))),128))])):_e("",!0)]),kl]),i(A,{open:a.value,"onUpdate:open":f[3]||(f[3]=M=>a.value=M),title:u.value,onOk:v,width:"476px"},{default:m(()=>[i(le,{class:"form-box",layout:"vertical"},{default:m(()=>[i(H,go({label:"问题名称"},L(c).question),{default:m(()=>[i(S,{maxLength:100,value:p.question,"onUpdate:value":f[2]||(f[2]=M=>p.question=M),placeholder:"请输入问题"},null,8,["value"])]),_:1},16)]),_:1})]),_:1},8,["open","title"])])}}},Sl=Q(wl,[["__scopeId","data-v-5125783f"]]),Cl={key:0,class:"robot-config-page"},Il={class:"setting-box"},Tl={class:"setting-box"},ql={class:"setting-box"},El={class:"setting-box"},Rl={class:"setting-box"},Ll={class:"setting-box"},Pl={class:"setting-box"},Ol={class:"setting-box"},Al={class:"setting-box"},Bl={class:"setting-box"},Ml={key:1,class:"robot-config-page"},Nl={__name:"index",setup(e){const t=an(),s=I(null),{robotInfo:l}=yo(t),{getRobot:n}=t,r=()=>{s.value.scrollTop=s.value.scrollHeight},a=I(1),u=I(!1),p=F(l.value);jt("robotInfo",{robotInfo:p,updateRobotInfo:y=>{let c=JSON.parse(JSON.stringify(y));Object.assign(p,c),h()},scrollBoxToBottom:r});const h=()=>{let y=JSON.parse(JSON.stringify(se(p))),c=y.welcomes;c.question=c.question.map(x=>x.content),y.welcomes=JSON.stringify(c);let _=y.unknown_question_prompt;_.question=_.question.map(x=>x.content),y.unknown_question_prompt=JSON.stringify(_),delete y.robot_avatar_url,u.value=!0,nn(y).then(x=>{if(x.res!=0)return Pe.error(x.msg);u.value=!1,Pe.success("保存成功"),n(p.id)}).catch(()=>{u.value=!1})};return(y,c)=>{const _=rt,x=Ye;return $(),O(ne,null,[i(x,{activeKey:a.value,"onUpdate:activeKey":c[0]||(c[0]=k=>a.value=k)},{default:m(()=>[($(),N(_,{key:1,tab:"基础配置"})),($(),N(_,{key:2,tab:"常见问题"}))]),_:1},8,["activeKey"]),a.value==1?($(),O("div",Cl,[o("div",{class:"scroll-box",ref_key:"scrollBox",ref:s},[o("div",Il,[i(_a)]),o("div",Tl,[i(ha)]),o("div",ql,[i(Qa)]),o("div",El,[i(zs)]),o("div",Rl,[i(Js)]),o("div",Ll,[i(Di)]),o("div",Pl,[i(ui)]),o("div",Ol,[i(ol)]),o("div",Al,[i(mi)]),o("div",Bl,[i(gi)])],512)])):($(),O("div",Ml,[i(Sl)]))],64)}}},Sr=Q(Nl,[["__scopeId","data-v-69ffa8f6"]]);export{Sr as default};
