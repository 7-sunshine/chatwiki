import{_ as H,b as re,L as Ae,e as V,M as J,o as ue,p as Le,r as Ue,a as Se,q as Oe,m as de,E as ce,t as Me,v as Ie,B as _e,c as Pe,w as Be,x as Fe,y as De,z as Re}from"../../index-C3D4HQO4.js";import{r as _,L as u,M as f,F as Z,a1 as j,a2 as Ee,Y as x,u as E,w as ze,j as t,Q as a,P as G,V as r,a3 as pe,a4 as me,A as Y,U as Q,X as B,a8 as ae,a9 as ve,v as Te}from"./vue-chunks-DrvJJrR0.js";import{g as Ge}from"./index-Dvk58OIJ.js";import{g as Ne}from"./index-4jhODJXn.js";import{g as $e}from"./index-CFSigmBv.js";import{v as fe}from"./validate-8MtiUsxW.js";import{F as W,_ as oe}from"./index-Dy2UaLQp.js";import{P as le}from"./PlusOutlined-CuZGeFo-.js";import{_ as Ke}from"./index-qm3dzawO.js";import"./index-92XYYNmA.js";import{I as ge}from"./Input-BVrvRKk_.js";import{S as He,_ as Xe}from"./index-CK6XLfa6.js";import{_ as he}from"./Password-DHIwewzt.js";import{C as ye,_ as ke}from"./index-BDCGZp8a.js";import{Q as te}from"./QuestionCircleOutlined-CdbzAklR.js";import{_ as we}from"./Search-2etv_UE_.js";import{_ as ne}from"./index-C5lzbLNl.js";import{_ as be,a as xe}from"./index-D3DLBLga.js";import{_ as qe}from"./index-CQom3Nvi.js";import{_ as Qe}from"./TextArea-Hvz_NOKt.js";import{_ as Ve,a as Ye}from"./index-BZK3XV9r.js";import"./dayjs-Bv4VEw_C.js";import"./axios-Cm0UX6qg.js";import"./qs-QntUJHOZ.js";import"./crypto-js-BpV8n4kc.js";import"./colors-DfBzDIod.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./responsiveObserve-DLBlQQpe.js";import"./collapseMotion-DfZt1qrJ.js";import"./FormItemContext-BDLcJmuw.js";import"./CheckOutlined-CTzTXmhw.js";import"./useRefs-Bj34oM9A.js";import"./index-BiAIeTEt.js";import"./inputProps-AgB5Odoi.js";import"./slide-BDhWp3gd.js";import"./index-BCwkXfxz.js";import"./DownOutlined-efyh-RzL.js";import"./SearchOutlined-D67jTUps.js";import"./move-CM83rOfC.js";import"./RadioButton-RnRA7W0e.js";import"./index-WDhJTqVN.js";import"./LeftOutlined-CxwHu80d.js";import"./RightOutlined-2S0-RiUi.js";import"./index-DNXaihvH.js";import"./dropdown-eXXIPs5t.js";import"./Dropdown-C3qXFNcz.js";import"./index-NXEUm3Jt.js";import"./shallowequal-CfnxU2uU.js";import"./index-CiMXXF-o.js";const Ze={class:"page-tabs"},je=["onClick"],We={__name:"page-tabs",props:{value:{type:[Number,String]}},emits:["update:value","change"],setup(P,{emit:g}){const{t:U}=re(),h=g,A=P,i=_([{value:1,title:U("views.user.model.teamMembers"),langKey:"views.user.model.teamMembers"},{value:0,title:U("views.user.model.rolePermissions"),langKey:"views.user.model.rolePermissions"}]),m=e=>{h("update:value",e),h("change",e)};return(e,S)=>(u(),f("div",Ze,[(u(!0),f(Z,null,j(i.value,y=>(u(),f("div",{class:Ee(["tab-item",{active:A.value==y.value}]),onClick:d=>m(y.value),key:y.value},x(E(U)(y.langKey)),11,je))),128))]))}},Je=H(We,[["__scopeId","data-v-924c1ece"]]),et=P=>(pe("data-v-5be3f074"),P=P(),me(),P),tt={class:"avatar-uploader"},at=["src"],st={key:1},ot=et(()=>r("div",{class:"ant-upload-text"},"上传照片",-1)),lt=["src"],nt={__name:"avatar-input",props:{value:{type:String,default:""}},emits:["update:value","change"],setup(P,{emit:g}){function U(n){return new Promise((p,v)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>p(s.result),s.onerror=F=>v(F)})}const h=g,A=P,i=_([]),m=_(!1),e=_("");ze(()=>A.value,n=>{e.value=n},{immediate:!0});const S=W.useInjectFormItemContext(),y=()=>{let n={imageUrl:e.value,file:i.value[0].originFileObj};h("change",n),h("update:value",n.imageUrl),S.onFieldChange()},d=n=>n.type==="image/jpeg"||n.type==="image/png"?n.size/1024<1024?(i.value=[n],U(n).then(s=>{e.value=s,m.value=!1,y()}),!1):(V.error("成员头像图片大小不能超过1M"),!1):(V.error("机器人头像只支持JPG、PNG格式的图片"),!1),L=_(!1),O=_(""),k=_(""),w=()=>{L.value=!1,k.value=""},l=async n=>{!n.url&&!n.preview&&(n.preview=await U(n.originFileObj)),O.value=n.url||n.preview,L.value=!0,k.value=n.name||n.url.substring(n.url.lastIndexOf("/")+1)};return(n,p)=>{const v=Ke,s=J;return u(),f("div",tt,[t(v,{"file-list":i.value,"onUpdate:fileList":p[0]||(p[0]=F=>i.value=F),"list-type":"picture-card","show-upload-list":!1,"before-upload":d,accept:".jpg,.png,.jpeg",onPreview:l},{default:a(()=>[e.value?(u(),f("img",{key:0,class:"avatar",src:e.value,alt:"avatar"},null,8,at)):(u(),f("div",st,[m.value?(u(),G(E(Ae),{key:0})):(u(),G(E(le),{key:1})),ot]))]),_:1},8,["file-list"]),t(s,{open:L.value,title:k.value,footer:null,onCancel:w},{default:a(()=>[r("img",{alt:"example",style:{width:"100%"},src:O.value},null,8,lt)]),_:1},8,["open","title"])])}}},it=H(nt,[["__scopeId","data-v-5be3f074"]]),se="data:image/png;base64,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",rt={class:"form-box"},ut={__name:"add-team-members",emits:["ok"],setup(P,{expose:g,emit:U}){const h=U,A=W.useForm,i=_(!1),m=_("添加团队成员"),e=Y({user_name:"",nick_name:"",avatar:"",avatar_url:"",user_roles:"3",password:"",check_password:"",id:""}),S=v=>{e.avatar=v.file},y=_([]);ue({page:1,size:200,search:""}).then(v=>{let s=v.data.list||[];y.value=s.filter(F=>F.id!="1")});const d=Y({user_name:[{message:"请输入登录账号",required:!0},{validator:async(v,s)=>!/^[a-zA-Z0-9_.-]+$/.test(s)&&s?Promise.reject("账号只能为字母、数字、“-”、“_”,“.”的组合"):Promise.resolve()}],nick_name:[{message:"请输入昵称",required:!0}],avatar_url:[{message:"请上传头像",required:!0}],user_roles:[{message:"请选择成员角色",required:!0}],password:[{message:"请输入登录密码",required:!0},{validator:async(v,s)=>!fe(s)&&s?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(v,s)=>s!=e.password&&s?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:L,validate:O,validateInfos:k}=A(e,d),w=()=>{m.value="添加团队成员",i.value=!0,L(),e.user_name="",e.nick_name="",e.avatar="",e.avatar_url=se,e.user_roles="3",e.password="",e.check_password="",e.id=""},l=v=>{m.value="编辑团队成员",e.user_name=v.user_name,e.nick_name=v.nick_name,e.avatar_url=v.avatar||se,e.avatar="",e.user_roles=v.user_roles,e.password="",e.check_password="",e.id=v.id,delete d.password,delete d.check_password,i.value=!0},n=_(!1),p=()=>{O().then(()=>{let v={...ve(e)};delete v.avatar_url,n.value=!0,Le(v).then(s=>{V.success(`${m.value}成功`),i.value=!1,h("ok")}).finally(()=>{n.value=!1})})};return g({add:w,edit:l}),(v,s)=>{const F=ge,C=oe,b=He,M=Xe,D=he,T=W,X=J;return u(),f("div",null,[t(X,{open:i.value,"onUpdate:open":s[6]||(s[6]=o=>i.value=o),title:m.value,onOk:p,width:"476px"},{default:a(()=>[r("div",rt,[t(T,{layout:"vertical"},{default:a(()=>[t(C,Q({label:"登录账号"},E(k).user_name),{default:a(()=>[t(F,{disabled:e.id!="",type:"text",placeholder:"账号只能为字母、数字、“-”、“_”,“.”的组合",value:e.user_name,"onUpdate:value":s[0]||(s[0]=o=>e.user_name=o)},null,8,["disabled","value"])]),_:1},16),t(C,Q({label:"成员昵称"},E(k).nick_name),{default:a(()=>[t(F,{maxlength:100,type:"text",placeholder:"请输入昵称",value:e.nick_name,"onUpdate:value":s[1]||(s[1]=o=>e.nick_name=o)},null,8,["value"])]),_:1},16),t(C,{label:"成员头像"},{default:a(()=>[t(it,{value:e.avatar_url,"onUpdate:value":s[2]||(s[2]=o=>e.avatar_url=o),onChange:S},null,8,["value"])]),_:1}),t(C,Q({label:"成员角色"},E(k).user_roles),{default:a(()=>[t(M,{value:e.user_roles,"onUpdate:value":s[3]||(s[3]=o=>e.user_roles=o),style:{width:"100%"},placeholder:"请选择成员角色"},{default:a(()=>[(u(!0),f(Z,null,j(y.value,o=>(u(),G(b,{key:o.id,value:o.id},{default:a(()=>[B(x(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},16),e.id?ae("",!0):(u(),G(C,Q({key:0,label:"登录密码"},E(k).password),{default:a(()=>[t(D,{value:e.password,"onUpdate:value":s[4]||(s[4]=o=>e.password=o),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16)),e.id?ae("",!0):(u(),G(C,Q({key:1,label:"确认密码"},E(k).check_password),{default:a(()=>[t(D,{value:e.check_password,"onUpdate:value":s[5]||(s[5]=o=>e.check_password=o),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16))]),_:1})])]),_:1},8,["open","title"])])}}},dt=H(ut,[["__scopeId","data-v-9931da5a"]]),ct={class:"form-box"},_t={__name:"reset-password",emits:["ok"],setup(P,{expose:g,emit:U}){const h=U,A=W.useForm,i=_(!1),m=_("重置登录密码"),e=Y({password:"",check_password:"",id:""}),S=Y({password:[{message:"请输入登录密码",required:!0},{validator:async(w,l)=>!fe(l)&&l?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(w,l)=>l!=e.password&&l?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:y,validate:d,validateInfos:L}=A(e,S),O=w=>{w.id,i.value=!0,y(),e.password="",e.check_password="",e.id=w.id},k=()=>{d().then(()=>{Ue({...ve(e)}).then(w=>{V.success("修改成功"),i.value=!1,h("ok")})})};return g({open:O}),(w,l)=>{const n=he,p=oe,v=W,s=J;return u(),f("div",null,[t(s,{open:i.value,"onUpdate:open":l[2]||(l[2]=F=>i.value=F),title:m.value,onOk:k,width:"476px"},{default:a(()=>[r("div",ct,[t(v,{layout:"vertical"},{default:a(()=>[t(p,Q({label:"登录密码"},E(L).password),{default:a(()=>[t(n,{value:e.password,"onUpdate:value":l[0]||(l[0]=F=>e.password=F),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),t(p,Q({label:"确认密码"},E(L).check_password),{default:a(()=>[t(n,{value:e.check_password,"onUpdate:value":l[1]||(l[1]=F=>e.check_password=F),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},pt=H(_t,[["__scopeId","data-v-d0706fa4"]]),mt={key:0,class:"form-wrapper"},vt={class:"select"},ft={class:"tools-wrapper"},gt=["src"],ht={class:"item-name"},yt={key:1,class:"form-wrapper"},kt={class:"select"},wt={class:"tools-wrapper"},bt={class:"item-name"},xt={key:2,class:"form-wrapper"},Ct={class:"select"},At={class:"tools-wrapper"},Lt={class:"item-name"},Ut={__name:"see-model-alert",props:{robotList:{type:Array,default:null},libraryList:{type:Array,default:null},formList:{type:Array,default:null}},emits:["save"],setup(P,{expose:g,emit:U}){const h=U,A=P,i=_([]),m=_(""),e=_("");re();const S=_(!1),y=_([]),d=w=>{const l=[];return w.map(n=>{l.push(n.id)}),l},L=(w,l,n)=>{i.value=[],e.value=w,e.value==="robot"?(y.value=A.robotList,m.value="添加成员管理的机器人",l&&l==="edit"&&(m.value="编辑成员管理的机器人",n&&(i.value=d(n.managed_robot_list)))):e.value==="library"?(y.value=A.libraryList,m.value="添加成员管理的知识库",l&&l==="edit"&&(m.value="编辑成员管理的知识库",n&&(i.value=d(n.managed_library_list)))):e.value==="form"&&(y.value=A.formList,m.value="添加成员管理的数据库",l&&l==="edit"&&(m.value="编辑成员管理的数据库",n&&(i.value=d(n.managed_form_list)))),S.value=!0},O=()=>{S.value=!1,h("save",i.value)},k=()=>{};return g({open:L}),(w,l)=>{const n=ye,p=ke,v=J;return u(),G(v,{class:"add-model-alert",width:"800px",open:S.value,"onUpdate:open":l[3]||(l[3]=s=>S.value=s),title:m.value,onOk:O,onCancel:k},{default:a(()=>[e.value==="robot"?(u(),f("div",mt,[r("div",vt," 已选择("+x(i.value.length)+") ",1),t(p,{class:"list-box",value:i.value,"onUpdate:value":l[0]||(l[0]=s=>i.value=s)},{default:a(()=>[(u(!0),f(Z,null,j(y.value,s=>(u(),G(n,{class:"list-item",key:s.id,value:s.id},{default:a(()=>[r("div",ft,[r("img",{class:"model-logo",src:s.robot_avatar,alt:""},null,8,gt),r("div",ht,x(s.robot_name),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])):e.value==="library"?(u(),f("div",yt,[r("div",kt," 已选择("+x(i.value.length)+") ",1),t(p,{class:"list-box",value:i.value,"onUpdate:value":l[1]||(l[1]=s=>i.value=s)},{default:a(()=>[(u(!0),f(Z,null,j(y.value,s=>(u(),G(n,{class:"list-item",key:s.id,value:s.id},{default:a(()=>[r("div",wt,[r("div",bt,x(s.library_name),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])):e.value==="form"?(u(),f("div",xt,[r("div",Ct," 已选择("+x(i.value.length)+") ",1),t(p,{class:"list-box",value:i.value,"onUpdate:value":l[2]||(l[2]=s=>i.value=s)},{default:a(()=>[(u(!0),f(Z,null,j(y.value,s=>(u(),G(n,{class:"list-item",key:s.id,value:s.id},{default:a(()=>[r("div",At,[r("div",Lt,x(s.name),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])):ae("",!0)]),_:1},8,["open","title"])}}},St=H(Ut,[["__scopeId","data-v-7e4cb232"]]),ie=P=>(pe("data-v-9340b603"),P=P(),me(),P),Ot={class:"team-members-pages"},Mt={class:"list-box"},It={class:"user-box"},Pt=["src"],Bt={class:"name-info"},Ft={class:"user-name"},Dt={class:"nick-name"},Rt={key:0,class:"list-content"},Et=ie(()=>r("div",null,"全部",-1)),zt=[Et],Tt={key:1,class:"list-content"},Gt=["onClick"],Nt={key:2,class:"list-preview list-content"},$t={style:{display:"inline"}},Kt={class:"list-item-box"},Ht={class:"list-item"},Xt=["onClick"],qt={key:0,class:"list-content"},Qt=ie(()=>r("div",null,"全部",-1)),Vt=[Qt],Yt={key:1,class:"list-content"},Zt=["onClick"],jt={key:2,class:"list-preview list-content"},Wt={style:{display:"inline"}},Jt={class:"list-item-box"},ea={class:"list-item"},ta=["onClick"],aa={key:0,class:"list-content"},sa=ie(()=>r("div",null,"全部",-1)),oa=[sa],la={key:1,class:"list-content"},na=["onClick"],ia={key:2,class:"list-preview list-content"},ra={style:{display:"inline"}},ua={class:"list-item-box"},da={class:"list-item"},ca=["onClick"],_a=["onClick"],pa=["onClick"],ma={key:0,class:"disabled"},va=["onClick"],fa={__name:"team-members",setup(P){const g=Se(),U=_(g.userInfo.user_id),h=Y({page:1,size:10,total:0,search:""}),A=_([]),i=_([]),m=_([]),e=_(""),S=_(""),y=_(null),d=o=>{h.page=o.current,h.size=o.pageSize,w()},L=()=>{h.page=1,w()},O=_([]),k=o=>{let R=[];return o.map(N=>{R.push(N.name)}),R.join(", ")},w=()=>{let o={page:h.page,size:h.size,search:h.search};Oe(o).then(R=>{let N=R.data.list;N.forEach(z=>{z.create_time=de(z.create_time*1e3).format("YYYY-MM-DD HH:mm"),z.managed_robot_list=z.managed_robot_list?JSON.parse(z.managed_robot_list):"",z.managed_library_list=z.managed_library_list?JSON.parse(z.managed_library_list):"",z.managed_form_list=z.managed_form_list?JSON.parse(z.managed_form_list):""}),O.value=N,h.total=+R.data.total})};L();const l=_(null),n=()=>{l.value.add()},p=o=>{l.value.edit(o)},v=_(null),s=o=>{v.value.open(o)},F=o=>{J.confirm({title:"提示?",icon:t(ce),content:"确认删除该用户",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{Me({id:o.id}).then(R=>{V.success("删除成功"),w()})},onCancel(){}})},C=async()=>{await Ge().then(o=>{A.value=o.data}).catch(()=>{})},b=async()=>{await Ne().then(o=>{i.value=o.data}).catch(()=>{})},M=async()=>{await $e().then(o=>{m.value=o.data}).catch(()=>{})},D=async(o,R)=>{o==="robot"?(await C(),e.value=o):o==="library"?(await b(),e.value=o):o==="form"&&(await M(),e.value=o),S.value=R.id,y.value.open(e.value)},T=async(o,R)=>{o==="robot"?(await C(),e.value=o):o==="library"?(await b(),e.value=o):o==="form"&&(await M(),e.value=o),S.value=R.id,y.value.open(e.value,"edit",R)},X=o=>{let R={user_id:S.value,t:e.value,id_list:o.join(",")};Ie(R).then(N=>{V.success("操作成功"),w()}).catch(()=>{})};return(o,R)=>{const N=_e,z=we,ee=ne,$=be,I=qe,K=Pe,Ce=xe;return u(),f("div",Ot,[t(ee,{justify:"space-between"},{default:a(()=>[t(N,{type:"primary",onClick:n},{icon:a(()=>[t(E(le))]),default:a(()=>[B(" 添加团队成员 ")]),_:1}),t(z,{value:h.search,"onUpdate:value":R[0]||(R[0]=c=>h.search=c),placeholder:"输入成员账号或昵称搜索",style:{width:"288px"},onSearch:L},null,8,["value"])]),_:1}),r("div",Mt,[t(Ce,{"data-source":O.value,pagination:{current:h.page,total:h.total,pageSize:h.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:d},{default:a(()=>[t($,{title:"成员名称","data-index":"user_name",width:"190px"},{default:a(({record:c})=>[r("div",It,[r("img",{src:c.avatar||E(se),alt:""},null,8,Pt),r("div",Bt,[r("div",Ft,x(c.user_name),1),r("div",Dt,x(c.nick_name),1)])])]),_:1}),t($,{title:"角色","data-index":"role_name",width:"100px"},{default:a(({record:c})=>[B(x(c.role_name),1)]),_:1}),t($,{"data-index":"managed_robot_list",width:"200px"},{title:a(()=>[B(" 管理的机器人 "),t(I,null,{title:a(()=>[B("所有者和管理员可以创建和管理全部机器人，成员只能管理分配的机器人。")]),default:a(()=>[t(E(te))]),_:1})]),default:a(({record:c})=>[c.role_type==1||c.role_type==2?(u(),f("div",Rt,zt)):c.managed_robot_list?(u(),f("div",Nt,[t(I,null,{title:a(()=>[r("div",$t,x(k(c.managed_robot_list)),1)]),default:a(()=>[r("div",Kt,[r("div",Ht,x(k(c.managed_robot_list)),1)])]),_:2},1024),r("div",{class:"list-highlight edit",onClick:q=>T("robot",c)},[t(K,{name:"edit"})],8,Xt)])):(u(),f("div",Tt,[r("div",{class:"list-highlight",onClick:q=>D("robot",c)},"添加",8,Gt)]))]),_:1}),t($,{"data-index":"managed_library_list",width:"200px"},{title:a(()=>[B(" 管理的知识库 "),t(I,null,{title:a(()=>[B("所有者和管理员可以创建和管理全部知识库，成员只能管理分配的知识库。")]),default:a(()=>[t(E(te))]),_:1})]),default:a(({record:c})=>[c.role_type==1||c.role_type==2?(u(),f("div",qt,Vt)):c.managed_library_list?(u(),f("div",jt,[t(I,null,{title:a(()=>[r("div",Wt,x(k(c.managed_library_list)),1)]),default:a(()=>[r("div",Jt,[r("div",ea,x(k(c.managed_library_list)),1)])]),_:2},1024),r("div",{class:"list-highlight edit",onClick:q=>T("library",c)},[t(K,{name:"edit"})],8,ta)])):(u(),f("div",Yt,[r("div",{class:"list-highlight",onClick:q=>D("library",c)},"添加",8,Zt)]))]),_:1}),t($,{"data-index":"managed_form_list",width:"200px"},{title:a(()=>[B(" 管理的数据库 "),t(I,null,{title:a(()=>[B("所有者和管理员可以创建和管理全部数据库，成员只能管理分配的数据库。")]),default:a(()=>[t(E(te))]),_:1})]),default:a(({record:c})=>[c.role_type==1||c.role_type==2?(u(),f("div",aa,oa)):c.managed_form_list?(u(),f("div",ia,[t(I,null,{title:a(()=>[r("div",ra,x(k(c.managed_form_list)),1)]),default:a(()=>[r("div",ua,[r("div",da,x(k(c.managed_form_list)),1)])]),_:2},1024),r("div",{class:"list-highlight edit",onClick:q=>T("form",c)},[t(K,{name:"edit"})],8,ca)])):(u(),f("div",la,[r("div",{class:"list-highlight",onClick:q=>D("form",c)},"添加",8,na)]))]),_:1}),t($,{title:"创建时间","data-index":"create_time",width:"190px"},{default:a(({record:c})=>[B(x(c.create_time),1)]),_:1}),t($,{title:"操作","data-index":"action",width:"230px"},{default:a(({record:c})=>[t(ee,{gap:16},{default:a(()=>[r("a",{onClick:q=>p(c)},"编辑",8,_a),r("a",{onClick:q=>s(c)},"重置密码",8,pa),c.id=="1"||c.id==U.value?(u(),f("span",ma,"删除")):(u(),f("a",{key:1,onClick:q=>F(c)},"删除",8,va))]),_:2},1024)]),_:1})]),_:1},8,["data-source","pagination"])]),t(dt,{ref_key:"addTeamMembersRef",ref:l,onOk:w},null,512),t(pt,{ref_key:"resetPasswordRef",ref:v,onOk:w},null,512),t(St,{ref_key:"seeModelAlertRef",ref:y,robotList:A.value,libraryList:i.value,formList:m.value,onSave:X},null,8,["robotList","libraryList","formList"])])}}},ga=H(fa,[["__scopeId","data-v-9340b603"]]),ha={class:"form-box"},ya={class:"title-row"},ka={class:"check-num"},wa={__name:"add-role",emits:["ok"],setup(P,{expose:g,emit:U}){const h=U,A=W.useForm,i=_([]),m=_({}),e=_(!1),S=_("添加角色"),y=_(""),d=Y({name:"",mark:"",role_type:""}),L=Y({name:[{message:"请输入角色名称",required:!0}]}),{resetFields:O,validate:k,validateInfos:w}=A(d,L),l=async()=>{await Be().then(C=>{i.value=C.data;for(let b=0;b<C.data.length;b++){const M=C.data[b];m.value[M.uni_key]=[]}})},n=async()=>{await l(),S.value="添加角色",y.value="",e.value=!0,d.name="",d.mark="",O()},p=C=>{S.value="编辑角色",y.value=C.id,Fe({id:C.id}).then(b=>{let M=b.data,D=M.role_permission||[];d.name=M.name,d.mark=M.mark,d.role_type=M.role_type,m.value=v(i.value,D),e.value=!0})},v=(C,b)=>{let M={};return C.forEach(D=>{M[D.uni_key]=[];for(let T=0;T<D.children.length;T++){const X=D.children[T];b.includes(X.uni_key)&&M[D.uni_key].push(X.uni_key)}}),M},s=C=>{let b=[];for(let M in C)C[M].map(T=>{b.push(T)});return b},F=()=>{k().then(()=>{let C=s(m.value),b={id:y.value,mark:d.mark};d.role_type==0&&(b.name=d.name,b.role_type=d.role_type,b.uni_keys=C.join(",")),De(b).then(M=>{e.value=!1,V.success("保存成功"),h("ok")})})};return Te(()=>{l()}),g({add:n,edit:p}),(C,b)=>{const M=ge,D=oe,T=Qe,X=ne,o=ye,R=Ve,N=Ye,z=ke,ee=W,$=J;return u(),f("div",null,[t($,{open:e.value,"onUpdate:open":b[2]||(b[2]=I=>e.value=I),title:S.value,onOk:F,width:"746px"},{default:a(()=>[r("div",ha,[t(ee,{layout:"vertical"},{default:a(()=>[t(D,Q({label:"角色名称"},E(w).name),{default:a(()=>[t(M,{type:"text",maxlength:100,disabled:d.role_type>0,placeholder:"请输入角色名称",value:d.name,"onUpdate:value":b[0]||(b[0]=I=>d.name=I)},null,8,["disabled","value"])]),_:1},16),t(D,{label:"角色备注"},{default:a(()=>[t(T,{value:d.mark,"onUpdate:value":b[1]||(b[1]=I=>d.mark=I),placeholder:"请输入角色备注"},null,8,["value"])]),_:1}),t(D,{label:"角色权限"},{default:a(()=>[(u(!0),f(Z,null,j(i.value,I=>(u(),f("div",{class:"role-check-box",key:I.uni_key},[t(X,{class:"title-boock",justify:"space-between"},{default:a(()=>[r("div",ya,x(I.name),1),r("div",ka,x(m.value[I.uni_key].length)+"/"+x(I.children.length),1)]),_:2},1024),t(z,{value:m.value[I.uni_key],"onUpdate:value":K=>m.value[I.uni_key]=K,style:{width:"100%"}},{default:a(()=>[t(N,{gutter:[0,12]},{default:a(()=>[(u(!0),f(Z,null,j(I.children,K=>(u(),G(R,{span:6,key:K.uni_key},{default:a(()=>[t(o,{disabled:d.role_type>0,value:K.uni_key},{default:a(()=>[B(x(K.name),1)]),_:2},1032,["disabled","value"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])]))),128))]),_:1})]),_:1})])]),_:1},8,["open","title"])])}}},ba=H(wa,[["__scopeId","data-v-bb48065b"]]),xa={class:"team-members-pages"},Ca={class:"list-box"},Aa={__name:"role-permissions",setup(P){_("");const g=Y({page:1,size:10,total:0,search:""}),U=_([{}]),h=d=>{g.page=d.current,g.size=d.pageSize,i()},A=()=>{g.page=1,i()},i=()=>{let d={page:g.page,size:g.size,search:g.search};ue(d).then(L=>{let O=L.data.list;O.forEach(k=>{k.update_time=de(k.update_time*1e3).format("YYYY-MM-DD HH:mm")}),U.value=O,g.total=+L.data.total})};A();const m=_(null),e=()=>{m.value.add()},S=d=>{m.value.edit(d)},y=d=>{J.confirm({title:"提示?",icon:t(ce),content:"确认删除该角色",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{Re({id:d.id}).then(L=>{V.success("删除成功"),i()})},onCancel(){}})};return(d,L)=>{const O=_e,k=we,w=ne,l=be,n=xe;return u(),f("div",xa,[t(w,{justify:"space-between"},{default:a(()=>[t(O,{type:"primary",onClick:e},{icon:a(()=>[t(E(le))]),default:a(()=>[B(" 添加角色 ")]),_:1}),t(k,{value:g.search,"onUpdate:value":L[0]||(L[0]=p=>g.search=p),placeholder:"输入角色名称",style:{width:"288px"},onSearch:A},null,8,["value"])]),_:1}),r("div",Ca,[t(n,{"data-source":U.value,pagination:{current:g.page,total:g.total,pageSize:g.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:h},{default:a(()=>[t(l,{title:"角色","data-index":"name",width:"157px"},{default:a(({record:p})=>[B(x(p.name),1)]),_:1}),t(l,{title:"备注","data-index":"mark",width:"480px"},{default:a(({record:p})=>[B(x(p.mark),1)]),_:1}),t(l,{title:"最近修改时间","data-index":"update_time",width:"150px"},{default:a(({record:p})=>[B(x(p.update_time),1)]),_:1}),t(l,{title:"最近修改人","data-index":"operate_name",width:"130px"},{default:a(({record:p})=>[B(x(p.operate_name),1)]),_:1}),t(l,{title:"创建人","data-index":"create_name",width:"130px"},{default:a(({record:p})=>[B(x(p.create_name),1)]),_:1}),t(l,{title:"操作","data-index":"action",width:"178px"},{default:a(({record:p})=>[t(w,{gap:16,class:"action-box"},{default:a(()=>[t(O,{type:"link",onClick:v=>S(p)},{default:a(()=>[B("编辑")]),_:2},1032,["onClick"]),t(O,{type:"link",onClick:v=>y(p),disabled:p.role_type<=3&&p.role_type>0},{default:a(()=>[B("删除")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:1})]),_:1},8,["data-source","pagination"])]),t(ba,{ref_key:"addRoleRef",ref:m,onOk:i},null,512)])}}},La=H(Aa,[["__scopeId","data-v-e2c92e52"]]),Ua={class:"user-model-page"},Sa={class:"list-wrapper"},Oa={__name:"index",setup(P){const g=_(1),U=()=>{g.value};return(h,A)=>(u(),f("div",Ua,[t(Je,{value:g.value,"onUpdate:value":A[0]||(A[0]=i=>g.value=i),onChange:U},null,8,["value"]),r("div",Sa,[g.value==1?(u(),G(ga,{key:0})):(u(),G(La,{key:1}))])]))}},As=H(Oa,[["__scopeId","data-v-752bf84e"]]);export{As as default};
